(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1095],{7280:function(e,n,r){Promise.resolve().then(r.bind(r,891))},891:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return x}});var a=r(7437),t=r(2265),o=r(605),i=r(9376),c=r(3216),s=r.n(c);function d(e){let{entrega:n}=e,r=(0,i.useRouter)();return(0,a.jsxs)("div",{className:s()["card-container"],onClick:()=>{r.push("/entregas/ver?id=".concat(n.entrega.en_id))},children:[(0,a.jsxs)("div",{className:s()["entrega-info"],children:[(0,a.jsxs)("h3",{className:s().titulo,children:[n.cliente.cli_municipio,", ",n.cliente.cli_estado,"."]}),(0,a.jsxs)("p",{children:["hora de salida programada: ",n.entrega.en_hora_salida]}),(0,a.jsxs)("p",{children:["hora de entrega: ",n.entrega.en_hora_entrega]}),(0,a.jsxs)("div",{className:s().estado,children:[(0,a.jsxs)("p",{children:["Estado actula: ",n.entrega.en_estado]}),(0,a.jsx)("div",{className:"".concat(s().led," ").concat("finalizada"===n.entrega.en_estado?s().ledVerde:s().ledAmarillo)})]})]}),(0,a.jsxs)("div",{className:s()["info-container"],children:[(0,a.jsx)("div",{className:s()["entrega-vehiculos"],children:0!=n.vehiculos.length?(0,a.jsx)(a.Fragment,{children:n.vehiculos.map((e,n)=>(0,a.jsxs)("h4",{children:[e.ve_marca," ",e.ve_modelo]},n))}):(0,a.jsx)("h4",{children:"No hay vehiculos"})}),(0,a.jsxs)("div",{className:s()["entrega-empleado"],children:[(0,a.jsx)("h4",{className:s().titulo,children:"Encargado de entrega"}),(0,a.jsxs)("p",{children:[n.encargado.emp_nombre," ",n.encargado.emp_apellido]})]})]})]})}var l=r(6806),u=r(3025),g=r.n(u);function _(e){let{fecha:n}=e;return(0,a.jsx)("div",{className:g()["banner-container"],children:(0,l.ji)(n)})}var h=r(8116),m=r(8999),f=r.n(m),p=r(7594),v=r.n(p),x=function(){let{data:e,status:n}=(0,o.useSession)();(0,i.useRouter)();let[r,c]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),[u,g]=(0,t.useState)(0),[m,p]=(0,t.useState)(10),[x,E]=(0,t.useState)([]),[j,N]=(0,t.useState)(null),[w,C]=(0,t.useState)([]);(0,t.useEffect)(()=>{"Administrador"!=e.user.role&&"Encargado"!=e.user.role&&fetch("/api/entregas/cardEntregas/filtrarEmpleado?&page=".concat(u,"&limit=").concat(m,"&user=").concat(e.user.id)).then(e=>{if(!e.ok)throw Error("No se pudo obtener la informaci\xf3n");return e.json()}).then(e=>{E(e),c(!1)}).catch(e=>{l(e),c(!1)}),"Administrador"===e.user.role&&fetch("/api/entregas/cardEntregas/filtrarEmpleado?&page=".concat(u,"&limit=").concat(m,"&access=Admin")).then(e=>{if(!e.ok)throw Error("No se pudo obtener la informaci\xf3n");return e.json()}).then(e=>{0!=e.length&&(E([...x,...e]),N(e[0].entrega.en_dia_entrega)),c(!1)}).catch(e=>{l(e),c(!1)}),"Encargado"===e.user.role&&fetch("/api/entregas/cardEntregas/filtrarEmpleado?&page=".concat(u,"&limit=").concat(m,"&access=en&user=").concat(e.user.id)).then(e=>{if(!e.ok)throw Error("No se pudo obtener la informaci\xf3n");return e.json()}).then(e=>{E([...x,...e]),N(e[0].entrega.en_dia_entrega),c(!1)}).catch(e=>{l(e),c(!1)}),"Encargado"!=e.user.role&&"Administrador"!=e.user.role&&fetch("/api/entregas/cardEntregas/filtrarEmpleado?&page=".concat(u,"&limit=").concat(m,"&user=").concat(e.user.id)).then(e=>{if(!e.ok)throw Error("No se pudo obtener la informaci\xf3n");return e.json()}).then(e=>{E([...x,...e]),N(e[0].entrega.en_dia_entrega),c(!1)}).catch(e=>{l(e),c(!1)})},[u]),(0,t.useEffect)(()=>{C((()=>{let e=[];for(let n=0;n<x.length;){let r=x[n].entrega.en_dia_entrega,a=[];for(let e=0;e<x.length;e++){let n=x[e];n.entrega.en_dia_entrega===r&&a.push(n)}e.push(a),n+=a.length}return e})())},[x]),(0,t.useEffect)(()=>{let e=()=>{let e=window.scrollY||document.documentElement.scrollTop,n=document.documentElement.scrollHeight;e+(window.innerHeight||document.documentElement.clientHeight)>=n-5&&S()&&g(u+1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let S=()=>!(x.length-u*m<10);return r?(0,a.jsx)("div",{className:v().loadingScreen,children:(0,a.jsx)(h.Z,{})}):s?(0,a.jsx)("div",{className:v().error,children:(0,a.jsxs)("div",{className:v().errorContent,children:[(0,a.jsx)(f(),{className:v().textIcon,name:"cloud-offline-outline"}),(0,a.jsx)("p",{className:v().textError,children:s.message})]})}):(0,a.jsx)("div",{children:0!=x.length?(0,a.jsx)(a.Fragment,{children:w.map((e,n)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{fecha:e[0].entrega.en_dia_entrega}),e.map((e,n)=>(0,a.jsx)(d,{entrega:e},n))]},n))}):(0,a.jsx)("div",{className:v().loadingScreen,children:(0,a.jsx)("h1",{className:v().textError,children:"A\xfan no hay entregas"})})})}},8116:function(e,n,r){"use strict";r.d(n,{Z:function(){return i}});var a=r(7437);r(2265);var t=r(6065),o=r.n(t);function i(){return(0,a.jsxs)("div",{className:o().contenedor,children:[(0,a.jsx)("div",{className:o().cuadrado1}),(0,a.jsx)("div",{className:o().cuadrado2})]})}},6806:function(e,n,r){"use strict";function a(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0})}function t(e){if(null==e)return"Hora no especificada";{let[n,r]=e.split(":");return"".concat(n,":").concat(r)}}function o(e){if(null==e)return"A\xfan no se ha programado una fecha de entrega";{let n=new Date(e),r=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][n.getUTCDay()],a=n.getUTCDate(),t=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][n.getUTCMonth()],o=n.getUTCFullYear();return"".concat(r," ").concat(a," de ").concat(t," del ").concat(o)}}function i(){var e=new Date,n=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return(n=n<10?"0"+n:n)+":"+(r=r<10?"0"+r:r)+":"+(a=a<10?"0"+a:a)}r.d(n,{P4:function(){return i},ji:function(){return o},ln:function(){return t},uf:function(){return a}})},7594:function(e){e.exports={container:"page_container__yjBg8",loadingScreen:"page_loadingScreen__uzViG",error:"page_error__lQ964",textIcon:"page_textIcon__ozXxo",textNoFound:"page_textNoFound__RcADE",textError:"page_textError__VpPHj"}},3025:function(e){e.exports={"banner-container":"BannerDiario_banner-container__zhL3M"}},3216:function(e){e.exports={"card-container":"CardEntregaPreview_card-container__hplhq","entrega-info":"CardEntregaPreview_entrega-info__N63Pj","entrega-empleado":"CardEntregaPreview_entrega-empleado__aVq9c","entrega-vehiculos":"CardEntregaPreview_entrega-vehiculos__dy273","info-container":"CardEntregaPreview_info-container__zWVIq",titulo:"CardEntregaPreview_titulo__UAy13",estado:"CardEntregaPreview_estado__7YXRJ",led:"CardEntregaPreview_led__woJ2r",ledVerde:"CardEntregaPreview_ledVerde__rZKpV",ledAmarillo:"CardEntregaPreview_ledAmarillo__YpYgJ"}},6065:function(e){e.exports={cuadrado1:"LoadingScreen_cuadrado1__7A200",cuadrado2:"LoadingScreen_cuadrado2__NNxpH",moverCuadrado1:"LoadingScreen_moverCuadrado1__8i1jV",moverCuadrado2:"LoadingScreen_moverCuadrado2__pz35P"}}},function(e){e.O(0,[1673,1316,8153,6307,2971,2117,1744],function(){return e(e.s=7280)}),_N_E=e.O()}]);