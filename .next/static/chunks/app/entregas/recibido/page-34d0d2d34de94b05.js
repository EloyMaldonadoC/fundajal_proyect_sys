(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2106],{6752:function(e,a,o){Promise.resolve().then(o.bind(o,9879))},9879:function(e,a,o){"use strict";o.r(a),o.d(a,{default:function(){return V}});var t=o(7437),n=o(7350),d=o.n(n),r=o(2265),s=o(9376),i=o(8116),c=o(8999),l=o.n(c),_=o(7648),u=o(4868),p=o(5941),h=o(6812),m=o(5171),g=o(7408),x=o(244),v=o(8662),f=o(3730),j=o(5150),N=o.n(j),b=function(e){let{productos:a,paquetes:o,edicion:n,deshacer:d}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:N().header,children:(0,t.jsx)("h3",{children:"Devoluciones"})}),(0,t.jsxs)("div",{className:N().titulo,children:[(0,t.jsx)("h4",{className:N().nombre,children:"Nombre"}),(0,t.jsx)("h4",{className:N().cantidad,children:"cantidad"})]}),o&&(0,t.jsx)(t.Fragment,{children:0!=o.length&&(0,t.jsx)(t.Fragment,{children:o.map((e,a)=>"devuelto"==e.en_pa_estado&&(0,t.jsxs)("div",{className:N().container,children:[(0,t.jsx)("div",{className:N().nombre,children:e.pa_nombre}),(0,t.jsx)("div",{className:N().cantidad,children:e.en_pa_cantidad}),(0,t.jsx)("div",{className:N().deshacer,children:n&&(0,t.jsx)(u.zx,{text:"deshacer",type:"cancelar",onPress:()=>{d(e)}})})]},a))})}),a&&(0,t.jsx)(t.Fragment,{children:0!=a.length&&(0,t.jsx)(t.Fragment,{children:a.map((e,a)=>"devuelto"==e.en_produc_estado&&(0,t.jsxs)("div",{className:N().container,children:[(0,t.jsx)("div",{className:N().nombre,children:e.produc_nombre}),(0,t.jsx)("div",{className:N().cantidad,children:e.en_produc_cantidad}),(0,t.jsx)("div",{className:N().deshacer,children:n&&(0,t.jsx)(u.zx,{text:"deshacer",type:"cancelar",onPress:()=>{d(e)}})})]},a))})}),(0,t.jsx)("div",{className:N().fooder})]})},S=o(6806),y=o(5213),C=o.n(y);function P(e){let{max:a,precio:o,vender:n}=e,[d,s]=(0,r.useState)(!1),[i,c]=(0,r.useState)(0),[l,_]=(0,r.useState)(!1),p=()=>{n(i),c(0),s(!1)};return(0,t.jsxs)("div",{children:[d?(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{className:C().input,type:"number",min:0,max:a,value:i,onChange:e=>{c(e.target.value)}}),(0,t.jsxs)("label",{children:["Total: ",(0,S.uf)(o*i)]}),(0,t.jsx)(u.zx,{text:"Aceptar",type:"aceptar",onPress:()=>{_(!0)},disabled:0==i}),(0,t.jsx)(u.zx,{text:"Cancelar",type:"cancelar",onPress:()=>{s(!1)}})]}):(0,t.jsx)(u.zx,{text:"Vender",onPress:()=>{s(!0)}}),(0,t.jsx)(u.u_,{title:"Vender Producto",message:"Al aceptar la acci\xf3n no se podra deshacer, \xbfvender producto?",show:l,handleClose:()=>_(!1),handleAccept:()=>{_(!1),p()}})]})}var D=function(e){let{listaDevueltos:a,vendidos:o}=e;return a&&0!=a.length?a?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:C().header,children:(0,t.jsx)("h3",{children:"Vender Productos Individuales"})}),(0,t.jsxs)("div",{className:C().titulo,children:[(0,t.jsx)("h4",{className:C().nombre,children:"Nombre"}),(0,t.jsx)("h4",{className:C().disponible,children:"Disponibles"}),(0,t.jsx)("h4",{className:C().precio,children:"Precio"}),(0,t.jsx)("h4",{className:C().vender,children:"Vender"})]}),a.map((e,a)=>(0,t.jsxs)("div",{className:C().container,children:[(0,t.jsx)("p",{className:C().nombre,children:e.produc_nombre}),(0,t.jsx)("p",{className:C().disponible,children:e.en_es_produc_cant}),(0,t.jsx)("p",{className:C().precio,children:(0,S.uf)(e.produc_precio_venta)}),(0,t.jsx)("div",{className:C().vender,children:(0,t.jsx)(P,{max:e.en_es_produc_cant,precio:e.produc_precio_venta,vender:a=>o(e.produc_id,a)})})]},a)),(0,t.jsx)("div",{className:C().fooder})]}):void 0:(0,t.jsx)("div",{children:"Aun no hay productos disponibles para venta individual"})},E=o(8723),w=o(605),k=o(9172);let T=e=>{if(null==e)return"A\xfan no se ha programado una fecha de entrega";{let a=new Date(e),o=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][a.getUTCDay()],t=a.getUTCDate(),n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][a.getUTCMonth()],d=a.getUTCFullYear();return"".concat(o," ").concat(t," de ").concat(n," del ").concat(d)}},z=e=>{if(null==e)return"Hora no especificada";{let[a,o]=e.split(":");return"".concat(a,":").concat(o)}},O=e=>e.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});var V=function(){let e=(0,s.useRouter)(),a=(0,s.useSearchParams)().get("id"),{data:o,status:n}=(0,w.useSession)(),[c,j]=(0,r.useState)(!0),[N,y]=(0,r.useState)(""),[C,P]=(0,r.useState)(!1),[V,I]=(0,r.useState)(!0),[F,q]=(0,r.useState)(!0),[A,R]=(0,r.useState)(!0),[Z,J]=(0,r.useState)(!1),[U,L]=(0,r.useState)(!1),[G,M]=(0,r.useState)(!1),[B,Q]=(0,r.useState)(!1),[H,W]=(0,r.useState)(!0),[X,Y]=(0,r.useState)(!0),[K,$]=(0,r.useState)(!1),[ee,ea]=(0,r.useState)(!1),[eo,et]=(0,r.useState)([]),[en,ed]=(0,r.useState)([]),[er,es]=(0,r.useState)([]),[ei,ec]=(0,r.useState)([]),[el,e_]=(0,r.useState)([]),[eu,ep]=(0,r.useState)([]),[eh,em]=(0,r.useState)([]),[eg,ex]=(0,r.useState)([]),[ev,ef]=(0,r.useState)([]),[ej,eN]=(0,r.useState)([]),[eb,eS]=(0,r.useState)([]),[ey,eC]=(0,r.useState)([]),[eP,eD]=(0,r.useState)([]),[eE,ew]=(0,r.useState)([]),[ek,eT]=(0,r.useState)(!1),[ez,eO]=(0,r.useState)(!1),[eV,eI]=(0,r.useState)(0),[eF,eq]=(0,r.useState)(0),[eA,eR]=(0,r.useState)(0),[eZ,eJ]=(0,r.useState)(0),[eU,eL]=(0,r.useState)(null),[eG,eM]=(0,r.useState)(0),[eB,eQ]=(0,r.useState)(0),[eH,eW]=(0,r.useState)(""),[eX,eY]=(0,r.useState)(""),[eK,e$]=(0,r.useState)(""),[e0,e1]=(0,r.useState)([]),[e6,e2]=(0,r.useState)(!1),[e7,e4]=(0,r.useState)(!1),[e8,e3]=(0,r.useState)(!1),[e5,e9]=(0,r.useState)(!1),[ae,aa]=(0,r.useState)(!1),[ao,at]=(0,r.useState)([]),[an,ad]=(0,r.useState)([]),[ar,as]=(0,r.useState)(!1),[ai,ac]=(0,r.useState)("producto"),[al,a_]=(0,r.useState)(null),[au,ap]=(0,r.useState)(null),[ah,am]=(0,r.useState)(0),[ag,ax]=(0,r.useState)(0);(0,r.useEffect)(()=>{"Administrador"===o.user.role||"Encargado"===o.user.role?fetch("/api/entregas/obtener/entrega/".concat(a)).then(e=>{if(!e.ok)throw Error("Error en la llamada");return e.json()}).then(a=>{if("recibido"===a.entrega.en_estado){if(console.log(a),et(a.entrega),ed(a.cliente),es(a.encargado),ec(a.empleados),e_(a.vehiculos),0!=a.productos.length){let e=a.productos.filter(e=>"en entrega"==e.en_produc_estado),o=a.productos.filter(e=>"devuelto"==e.en_produc_estado);ep(e),at(o)}if(0!=a.paquetes.length){let e=a.paquetes.filter(e=>"en entrega"==e.en_pa_estado),o=a.paquetes.filter(e=>"devuelto"==e.en_pa_estado);em(e),ad(o)}if(ex(a.productos_paquete),0!=a.producto_estado.length){let e=a.producto_estado.filter(e=>"cargado"==e.en_es_produc_estado||"recibido"==e.en_es_produc_estado),o=a.producto_estado.filter(e=>"da\xf1ado"==e.en_es_produc_estado),t=a.producto_estado.filter(e=>"extraviado"==e.en_es_produc_estado),n=a.producto_estado.filter(e=>"no encontrado"==e.en_es_produc_estado),d=a.producto_estado.filter(e=>"devuelto"==e.en_es_produc_estado),r=a.producto_estado.filter(e=>"vendido individual"==e.en_es_produc_estado);ef(e),eS(o),eN(t),eC(n),eD(d),ew(r)}j(!1)}else e.push("/entregas")}).catch(e=>{y(e)}):e.push("/")},[a,e]),(0,r.useEffect)(()=>{fetch("/api/entregas/deudas/".concat(a)).then(e=>{if(!e.ok)throw Error("Response is not ok");return e.json()}).then(e=>{eL(e.deu_id),eI(e.deu_deuda),eM(e.deu_abono),eJ(e.deu_deuda_pendiente)}).catch(e=>{y(e)})},[a,e6]),(0,r.useEffect)(()=>{eU&&fetch("/api/entregas/deudas/pagos/".concat(eU)).then(e=>{if(!e.ok)throw Error("Response is not ok");return e.json()}).then(e=>{e1(e)}).catch(e=>{y(e)})},[eU,e6]),(0,r.useEffect)(()=>{let e=0,a=0,o=0;eh.forEach(a=>e+=(a.pa_precio+a.en_pa_desc)*a.en_pa_cantidad),eu.forEach(a=>e+=(a.produc_precio_venta+a.en_produc_oferta)*a.en_produc_cantidad),eu.forEach(e=>a+=e.produc_parti_fun*e.en_produc_cantidad),eu.forEach(e=>o+=e.produc_parti_enlace*e.en_produc_cantidad),eh.forEach(e=>a+=e.pa_comision*e.en_pa_cantidad),eh.forEach(e=>o+=e.pa_comision*e.en_pa_cantidad),eI(e),eq(a),eR(o)},[eu,eh]);let av=e=>{let a=ej.find(a=>a.produc_id==e);eN(ej.filter(a=>a.produc_id!=e)),ef(ev.map(o=>o.produc_id==e?{...o,en_es_produc_cant:Number(o.en_es_produc_cant)+Number(a.en_es_produc_cant)}:o)),J(!0)},af=e=>{let a=eb.find(a=>a.produc_id==e);eS(eb.filter(a=>a.produc_id!=e)),ef(ev.map(o=>o.produc_id==e?{...o,en_es_produc_cant:Number(o.en_es_produc_cant)+Number(a.en_es_produc_cant)}:o)),J(!0)},aj=e=>{let a=ey.find(a=>a.produc_id==e);eC(ey.filter(a=>a.produc_id!=e)),ef(ev.map(o=>o.produc_id==e?{...o,en_es_produc_cant:Number(o.en_es_produc_cant)+Number(a.en_es_produc_cant)}:o)),J(!0)},aN=()=>{let e=eV-eG-e0.reduce((e,a)=>e+a.pag_monto,0);return e<=0&&(eT(!0),console.log("deuda saldada")),e},ab=async()=>{aD();try{if(L(!0),!(await fetch("/api/entregas/deudas/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deu_estado:Number(eZ)-Number(eB)<=0?"saldada":"pendiente",deu_deuda_pendiente:Number(eZ)-Number(eB)<=0?0:Number(eZ)-Number(eB),deu_comision_funjal:eF,deu_comision_enlace:eA})})).ok)throw Error("Response is not ok");(await fetch("/api/entregas/deudas/pagos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deu_id:eU,pag_monto:eB,pag_metodo:eX,pag_desc:eK,pag_fecha_transac:eH})})).ok&&(e2(!e6),eO(!1),eQ(0),eW(""),eY(""),e$("")),L(!1),e4(!1)}catch(e){y(e)}},aS=()=>{console.log("monto",eB),console.log("fecha",eH),console.log("metodo",eX),console.log("descripcion",eK),eB>0&&""!=eH&&""!=eX&&""!=eK?e4(!0):e3(!0)},ay=async()=>{if(V){try{if(await fetch("/api/entregas/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({en_estado:"finalizada"})}).then(e=>{if(!e.ok)throw Error("Response is not ok");return e.json()}),0!=eP.length){await fetch("/api/entregas/productos/addInventary",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(eP)}).then(e=>{if(!e.ok)throw Error("Response put products is not ok");return e.json()});let e=eP.map(e=>{let a=new Date;return{produc_id:e.produc_id,hist_estado:"entrada",hist_cantidad:e.en_es_produc_cant,hist_precio_ent_sal:e.produc_precio_venta,hist_hora:(0,S.P4)(),hist_dia:a.toISOString().split("T")[0],hist_motivo:"devolucion"}});await fetch("/api/inventario/historial/lista",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw Error("Response post historia is not ok");return e.json()})}if(0!=eE.length){let e=eE.map(e=>{let a=new Date;return{produc_id:e.produc_id,hist_estado:"entrada",hist_cantidad:e.en_es_produc_cant,hist_precio_ent_sal:e.produc_precio_venta,hist_hora:(0,S.P4)(),hist_dia:a.toISOString().split("T")[0],hist_motivo:"devolucion"}});await fetch("/api/inventario/historial/lista",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw Error("Response post historia is not ok");return e.json()});let a=eE.map(e=>{let a=new Date;return{produc_id:e.produc_id,hist_estado:"salida",hist_cantidad:e.en_es_produc_cant,hist_precio_ent_sal:e.produc_precio_venta,hist_hora:(0,S.P4)(),hist_dia:a.toISOString().split("T")[0],hist_motivo:"venta individual"}});await fetch("/api/inventario/historial/lista",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(e=>{if(!e.ok)throw Error("Response post historia is not ok");return e.json()})}}catch(e){y(e)}e.push("/entregas")}},aC=e=>{if(0==e)am(0),a_(null),ax(0);else{ax(0);let a=eu.find(a=>a.produc_id==e);am(a.en_produc_cantidad),a_(a),console.log(a)}},aP=e=>{if(0==e)am(0),ap(null),ax(0);else{ax(0);let a=eh.find(a=>a.pa_id==e);am(a.en_pa_cantidad),ap(a),console.log(a)}},aD=async()=>{if(!V)try{L(!0);let e=[...ev,...eb,...ej,...ey,...eP,...eE],o=[...eu,...ao],t=[...eh,...an];if(Z){if(!(await fetch("/api/entregas/productos/status/".concat(a),{method:"DELETE"})).ok)throw Error("Response detele states is not ok");if(!(await fetch("/api/entregas/productos/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Response post states is not ok")}if(!F){let e=await fetch("/api/entregas/productos/".concat(a),{method:"DELETE"});if(!e.ok)throw Error("Response delete products is not ok");if((200==e.status||204==e.status)&&!(await fetch("/api/entregas/productos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw Error("Response post products is not ok")}if(!A){if(!(await fetch("/api/entregas/paquetes/".concat(a),{method:"DELETE"})).ok)throw Error("Response delete paquetes is not ok");if(!(await fetch("/api/entregas/paquetes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Response post paquetes is not ok")}F&&A||await fetch("/api/entregas/deudas/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deu_deuda:eV,deu_deuda_pendiente:aN(),deu_comision_funjal:eF,deu_comision_enlace:eA})}).then(e=>{if(!e.ok)throw Error("Response put deuda is not ok")}).catch(e=>{y(e)}),I(!0),L(!1)}catch(e){y(e)}},aE=async()=>{if(0!=ah&&(al||au)&&0!=ag){if(al){if(0==ao.filter(e=>e.produc_id==al.produc_id).length){if(ah==Number(ag)){let e=eu.filter(e=>e.produc_id!=al.produc_id);at([...ao,{en_id:al.en_id,produc_id:Number(al.produc_id),produc_nombre:al.produc_nombre,produc_precio_venta:Number(al.produc_precio_venta),en_produc_cantidad:Number(ag),en_produc_estado:"devuelto",en_produc_oferta:0}]),ep(e)}else console.log("No es igual"),ep(eu.map(e=>e.produc_id==al.produc_id?{...e,en_produc_cantidad:Number(e.en_produc_cantidad)-ag}:e)),at([...ao,{...al,en_produc_cantidad:Number(ag),en_produc_estado:"devuelto"}])}else at(ao.map(e=>e.produc_id==al.produc_id?{...e,en_produc_cantidad:Number(e.en_produc_cantidad)+Number(ag)}:e)),ah==Number(ag)?ep(eu.filter(e=>e.produc_id!=al.produc_id)):ep(eu.map(e=>e.produc_id==al.produc_id?{...e,en_produc_cantidad:Number(e.en_produc_cantidad)-Number(ag)}:e));let e=ev.find(e=>e.produc_id==al.produc_id),a=eP.find(e=>e.produc_id==al.produc_id);console.log("lista de productos",e),console.log("lista",a),ef(ev.map(e=>e.produc_id==al.produc_id?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)-Number(ag)}:e)),a?eD(eP.map(e=>e.produc_id==a.produc_id?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)+Number(ag)}:e)):eD([...eP,{...e,en_es_produc_cant:Number(ag),en_es_produc_estado:"devuelto"}]),q(!1)}if(au){let e=an.filter(e=>e.pa_id==au.pa_id);console.log(e),0==e.length?(console.log("no existe"),ah==Number(ag)?(em(eh.filter(e=>e.pa_id!=au.pa_id)),ad([...an,{pa_id:au.pa_id,en_id:au.en_id,en_pa_cantidad:ag,en_pa_estado:"devuelto",en_pa_desc:0,pa_nombre:au.pa_nombre,pa_precio:au.pa_precio}]),console.log(eg.filter(e=>e.pa_id==au.pa_id))):(console.log("No es igual"),em(eh.map(e=>e.pa_id==au.pa_id?{...e,en_pa_cantidad:Number(e.en_pa_cantidad)-ag}:e)),ad([...an,{...au,en_pa_cantidad:Number(ag),en_pa_estado:"devuelto"}]))):(ad(an.map(e=>e.pa_id==au.pa_id?{...e,en_pa_cantidad:Number(e.en_pa_cantidad)+Number(ag)}:e)),ah==Number(ag)?em(eh.filter(e=>e.pa_id!=au.pa_id)):em(eh.map(e=>e.pa_id==au.pa_id?{...e,en_pa_cantidad:Number(e.en_pa_cantidad)-Number(ag)}:e)));let a=eg.filter(e=>e.pa_id==au.pa_id),o=[...eP];for(let e=0;e<a.length;e++){let t=a[e],n=eP.find(e=>e.produc_id==t.produc_id);if(console.log("producto",t,e),console.log("existe",n),n){console.log("existe este producto en la lista");for(let e=0;e<o.length;e++){let a=o[e];console.log("producto listado",a),t.produc_id==a.produc_id&&(o[e]={...a,en_es_produc_cant:Number(a.en_es_produc_cant)+Number(t.produc_pa_cantidad)*Number(ag)})}}else console.log("no existe este producto en la lista"),o.push({produc_id:Number(t.produc_id),en_id:Number(t.en_id),produc_nombre:t.produc_nombre,produc_precio_venta:Number(t.produc_precio_venta),en_es_produc_cant:Number(t.produc_pa_cantidad)*Number(ag),en_es_produc_estado:"devuelto"}),console.log("Se a\xf1adido",t.produc_nombre);eD(o),ef(ev.map(e=>a.find(a=>a.produc_id==e.produc_id)?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)-Number(t.produc_pa_cantidad)*Number(ag)}:e))}R(!1)}}J(!0),I(!1),ac("producto"),as(!1),a_(null),ap(null),ax(0),am(0)},aw=e=>{if(e.produc_id){console.log("es un producto");let a=eu.find(a=>a.produc_id==e.produc_id),o=ao.find(a=>a.produc_id==e.produc_id),t=eP.find(a=>a.produc_id==e.produc_id);console.log("existe producto",a),console.log("producto devuelto",o),console.log("producto de la lista devueltos",t),a?(ep(eu.map(a=>a.produc_id==e.produc_id?{...a,en_produc_cantidad:a.en_produc_cantidad+e.en_produc_cantidad}:a)),at(ao.filter(a=>a.produc_id!=e.produc_id))):(ep([...eu,{...e,en_produc_estado:"en entrega"}]),at(ao.filter(a=>a.produc_id!=e.produc_id))),ef(ev.map(a=>a.produc_id==e.produc_id?{...a,en_es_produc_cant:Number(a.en_es_produc_cant)+Number(o.en_produc_cantidad)}:a)),o.en_produc_cantidad==t.en_es_produc_cant?eD(ev.filter(a=>a.produc_id!=e.produc_id)):eD(eP.map(a=>a.produc_id==e.produc_id?{...a,en_es_produc_cant:Number(a.en_es_produc_cant)-Number(o.en_produc_cantidad)}:a))}else{console.log("es un paquete");let a=eh.find(a=>a.pa_id==e.pa_id),o=eg.filter(a=>a.pa_id==e.pa_id);a?(em(eh.map(a=>a.pa_id==e.pa_id?{...a,en_pa_cantidad:a.en_pa_cantidad+e.en_pa_cantidad}:a)),ad(an.filter(a=>a.pa_id!=e.pa_id))):(em([...eh,{...e,en_pa_estado:"en entrega"}]),ad(an.filter(a=>a.pa_id!=e.pa_id)));let t=an.find(a=>a.pa_id==e.pa_id),n=[...eP];for(let e=0;e<o.length;e++){let a=o[e],d=eP.find(e=>e.produc_id==a.produc_id);console.log("producto listado",a,e),console.log("producto devuelto",d,e),t.en_pa_cantidad*a.produc_pa_cantidad==d.en_es_produc_cant?(console.log("es igual"),n=n.filter(e=>e.produc_id!=a.produc_id)):(console.log("no es igual"),n=n.map(e=>e.produc_id==a.produc_id?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)-Number(t.en_pa_cantidad*a.produc_pa_cantidad)}:e));for(let e=0;e<ev.length;e++){let o=ev[e];o.produc_id==a.produc_id&&(o.en_es_produc_cant=Number(o.en_es_produc_cant)+Number(t.en_pa_cantidad*a.produc_pa_cantidad),console.log("resgesado a la lista de productos ",a.produc_nombre))}}eD(n)}I(!1),J(!0)},ak=(e,a)=>{console.log("cantidad",a),console.log("producto",e);let o=eP.find(a=>a.produc_id==e);eE.find(a=>a.produc_id==e)?(a==o.en_es_produc_cant?eD(eP.filter(a=>a.produc_id!=e)):eD(eP.map(o=>o.produc_id==e?{...o,en_es_produc_cant:Number(o.en_es_produc_cant)-a}:o)),ew(eE.map(o=>o.produc_id==e?{...o,en_es_produc_cant:Number(o.en_es_produc_cant)+a}:o))):(a==o.en_es_produc_cant?eD(eP.filter(a=>a.produc_id!=e)):eD(eP.map(o=>o.produc_id==e?{...o,en_es_produc_cant:Number(o.en_es_produc_cant)-a}:o)),ew([...eE,{...o,en_es_produc_cant:a,en_es_produc_estado:"vendido individual"}])),I(!1),J(!0)};return c?(0,t.jsx)("div",{className:d().loadingScreen,children:(0,t.jsx)(i.Z,{})}):N?(0,t.jsx)("div",{className:d().error,children:(0,t.jsxs)("div",{className:d().errorContent,children:[(0,t.jsx)(l(),{className:d().textIcon,name:"cloud-offline-outline"}),(0,t.jsx)("p",{className:d().textError,children:N.message})]})}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:d().navegacion,children:(0,t.jsxs)("h4",{children:[(0,t.jsx)(_.default,{href:"/entregas",className:d().link,children:"Entregas"})," ","\\ Recibido \\"," ",0!=eo.length?"".concat(en.cli_municipio,", ").concat(en.cli_estado,"."):"Cargando..."]})}),(0,t.jsxs)("div",{className:d().herramientas,children:[0!=eo.length&&(0,t.jsxs)("p",{children:["Entrega realizada el d\xeda"," ",(0,t.jsx)("b",{children:T(eo.en_dia_entrega)})," a las"," ",(0,t.jsxs)("b",{children:[z(eo.en_hora_entrega)," hrs"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.zx,{text:"Finalizar Entrega",type:"",onPress:()=>P(!0)}),(0,t.jsx)(u.zx,{text:V?"Guardado":"Guardar",type:"cancelar",onPress:()=>aD()})]})]}),(0,t.jsxs)("div",{className:d().contenido,children:[(0,t.jsxs)("div",{className:d().subContenedor1,children:[(0,t.jsxs)("div",{className:d().herramientasContenido,children:[(0,t.jsxs)("div",{className:d().menuContenidoEntrega,children:[(0,t.jsx)(u.zx,{text:"Contenido de la entrega",type:H?"":"cancelar",onPress:()=>{Q(!1),W(!0),as(!1),ea(!1)}}),H&&(0,t.jsx)(u.zx,{text:"Devolver Productos",type:ar?"":"cancelar",onPress:()=>{as(!ar)}})]}),(0!=eP.length||0!=eE.length)&&(0,t.jsx)(u.zx,{text:"venta individual",type:ee?"":"cancelar",onPress:()=>{ea(!0),W(!1),Q(!1)}}),(0,t.jsx)(u.zx,{text:"Total de Productos",type:B?"":"cancelar",onPress:()=>{Q(!0),W(!1),as(!1),ea(!1)}})]}),ee&&(0,t.jsxs)("div",{className:d().scrollable,children:[0!=eP.length&&(0,t.jsx)(D,{listaDevueltos:eP,vendidos:(e,a)=>ak(e,a)}),0!=eE.length&&(0,t.jsx)(E.Z,{listaVentasIndividuales:eE})]}),H&&(0,t.jsxs)("div",{className:d().scrollable,children:[ar&&(0,t.jsx)("div",{className:d().menuDevolucion,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Seleccionar a devolver: "}),(0,t.jsxs)("select",{onChange:e=>{ac(e.target.value),a_(null),ap(null),ax(0),am(0)},className:"".concat(d().selecDevolver," ").concat(d().selecIzq),children:[(0,t.jsx)("option",{value:"producto",children:"producto"}),(0,t.jsx)("option",{value:"paquete",children:"paquete"})]}),"producto"==ai&&(0,t.jsxs)("select",{onChange:e=>aC(e.target.value),className:d().selecDevolver,children:[(0,t.jsx)("option",{value:0,children:"--seleccionar--"}),0!=eu.length&&(0,t.jsx)(t.Fragment,{children:eu.map((e,a)=>(0,t.jsx)("option",{value:e.produc_id,children:e.produc_nombre},a))})]}),"paquete"==ai&&(0,t.jsxs)("select",{onChange:e=>aP(e.target.value),className:d().selecDevolver,children:[(0,t.jsx)("option",{value:0,children:"--seleccionar--"}),0!=eh.length&&(0,t.jsx)(t.Fragment,{children:eh.map((e,a)=>(0,t.jsx)("option",{value:e.pa_id,children:e.pa_nombre},a))})]}),(0,t.jsx)("input",{type:"number",min:0,max:ah,value:ag,onChange:e=>{ax(e.target.value)},className:d().inputDevolver}),(0,t.jsx)(u.zx,{text:"Aceptar",type:"cancelar",onPress:()=>{aa(!0)},disabled:0==ag})]})}),(0,t.jsx)(x.Z,{paquetes:eh,productos:eu,totalAPagar:e=>{}}),0!=(0!=ao.length||an.length)&&(0,t.jsx)(b,{paquetes:an,productos:ao,edicion:!1,deshacer:e=>aw(e)})]}),B&&(0,t.jsxs)("div",{className:d().scrollable,children:[(0,t.jsx)(p.Z,{productos:ev}),0!=eP.length&&(0,t.jsx)(f.Z,{titulo:"Productos Devueltos",listaProductos:eP}),0!=eb.length&&(0,t.jsx)(f.Z,{titulo:"Productos da\xf1ados",listaProductos:eb,alterButton:"repuesto",onDelete:e=>{af(e),I(!1)}}),0!=ej.length&&(0,t.jsx)(f.Z,{titulo:"Productos extraviados",listaProductos:ej,alterButton:"repuesto",onDelete:e=>{av(e),I(!1)}}),0!=ey.length&&(0,t.jsx)(f.Z,{titulo:"Productos no encontrados",listaProductos:ey,alterButton:"repuesto",onDelete:e=>{aj(e),I(!1)}})]})]}),(0,t.jsxs)("div",{className:d().subContenedor2,children:[(0,t.jsxs)("div",{className:d().herramientasInfo,children:[(0,t.jsx)(u.zx,{text:G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Visualizar"}),(0,t.jsx)(l(),{className:d().icon,name:"eye-outline"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Ocultar"}),(0,t.jsx)(l(),{className:d().icon,name:"eye-off-outline"})]}),type:G?"contenido-light":"contenido-dark",onPress:()=>M(!G)}),(0,t.jsx)(u.zx,{text:"informaci\xf3n",type:X?"":"cancelar",onPress:()=>{Y(!0),$(!1)}}),(0,t.jsx)(u.zx,{text:"Pagos",type:K?"":"cancelar",onPress:()=>{Y(!1),$(!0)}})]}),!G&&(0,t.jsxs)(t.Fragment,{children:[X&&(0,t.jsxs)("div",{className:d().scrollable,children:[(0,t.jsx)(h.Z,{municipio:en}),(0,t.jsx)(m.Z,{empleados:ei,encargado:er}),(0,t.jsx)(g.Z,{vehiculos:el})]}),K&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:d().menuPagos,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Deuda: "}),O(eV)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Abono: "}),O(eG)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Saldo Restante:"})," ",ek?"Cuenta saldada":O(aN())]})]}),!ek&&(0,t.jsx)(u.zx,{text:ez?"Contraer":"Nuevo pago",type:ez?"":"cancelar",onPress:()=>eO(!ez)}),ez&&(0,t.jsxs)("div",{className:d().formulario,children:[(0,t.jsxs)("form",{children:[(0,t.jsx)("label",{children:"Monto:"}),(0,t.jsx)("input",{type:"number",min:0,className:d().input,value:eB,onChange:e=>eQ(e.target.value)}),(0,t.jsx)("label",{children:"Fecha:"}),(0,t.jsx)("input",{type:"date",className:d().date,value:eH,onChange:e=>eW(e.target.value)}),(0,t.jsx)("label",{children:"M\xe9todo de pago:"}),(0,t.jsxs)("select",{className:d().select,value:eX,onChange:e=>eY(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-Seleccione m\xe9todo-"}),(0,t.jsx)("option",{value:"efectivo",children:"Efectivo"}),(0,t.jsx)("option",{value:"transferencia",children:"Transferencia"})]}),(0,t.jsxs)("section",{className:d().sectionTextarea,children:[(0,t.jsx)("label",{children:"Comentario:"}),(0,t.jsx)("textarea",{className:d().textarea,value:eK,onChange:e=>e$(e.target.value)})]})]}),(0,t.jsx)(u.zx,{text:"Guardar",type:"cancelar",onPress:()=>aS()})]})]}),0!=e0.length?(0,t.jsx)("div",{className:d().scrollablePagos,children:e0.map(e=>(0,t.jsx)(v.Z,{pago:e},e.pag_id))}):(0,t.jsx)("div",{className:d().errorContent,children:(0,t.jsx)("p",{className:d().textNoFound,children:"No hay pagos"})})]})]})]})]}),(0,t.jsx)(u.u_,{title:"Finalizar Entrega",show:C,message:"\xbfDesea finalizar la entrega?",handleAccept:()=>{aD(),L(!0),ay()},handleClose:()=>P(!1)}),(0,t.jsx)(u.u_,{title:"Nuevo Pago",show:e7,message:"\xbfDesea agregar el nuevo pago?",handleAccept:()=>{ab()},handleClose:()=>e4(!1)}),(0,t.jsx)(u.u_,{show:ae,title:"Devolver Producto",message:"Si devuelves un producto no podras deshacer la acci\xf3n, \xbfDeseas Continuar?",handleClose:()=>aa(!1),handleAccept:()=>{aa(!1),aE()}}),(0,t.jsx)(u.bZ,{title:"Datos del pago invalidos",message:"Por favor, complete todos los campos o introdusca un monto valido",show:e8,handleAccept:()=>e3(!1)}),(0,t.jsx)(u.bZ,{title:"Falta saldo por paga",message:"A\xfan queda saldo por cubrir y puede que algunos productos no se hagan repuesto o entregado",show:e5,handleAccept:()=>e9(!1)}),(0,t.jsx)(k.Z,{show:U})]})}},9172:function(e,a,o){"use strict";var t=o(7437),n=o(6660),d=o.n(n);a.Z=function(e){let{show:a}=e;return(0,t.jsx)("div",{className:"".concat(d().modal," ").concat(a?d().show:""),children:(0,t.jsxs)("div",{className:d().contenedor,children:[(0,t.jsx)("div",{className:d().cuadrado1}),(0,t.jsx)("div",{className:d().cuadrado2})]})})}},7350:function(e){e.exports={navegacion:"page_navegacion__GIUzK",link:"page_link__bD9Dz",herramientas:"page_herramientas__h_Try",contenido:"page_contenido__z5FwG",herramientasInfo:"page_herramientasInfo__49gyc",icon:"page_icon__tpOFR",herramientasContenido:"page_herramientasContenido__HVc3h",menuContenidoEntrega:"page_menuContenidoEntrega__4Q7si",select:"page_select__UZocY",option:"page_option__f6DQy",inputNumberContainer:"page_inputNumberContainer__6FMhT",inputNumber:"page_inputNumber___PWfr",subContenedor1:"page_subContenedor1__oBjxr",subContenedor2:"page_subContenedor2__6Gr3n",scrollable:"page_scrollable__kCP_k",scrollablePagos:"page_scrollablePagos__p_RfA",loadingScreen:"page_loadingScreen__6Z87Q",error:"page_error__Om_HN",textIcon:"page_textIcon__b5ivf",textNoFound:"page_textNoFound__ACwKG",textError:"page_textError__EOe_c",errorContent:"page_errorContent__TiVPw",menuPagos:"page_menuPagos__NgZUA",formulario:"page_formulario__Oet_h",input:"page_input__weZ0E",date:"page_date__CY0FC",sectionTextarea:"page_sectionTextarea__8eXEm",textarea:"page_textarea__nc5d8",menuDevolucion:"page_menuDevolucion__h7WBJ",selecDevolver:"page_selecDevolver__GEf2O",selecIzq:"page_selecIzq__6ucFx",inputDevolver:"page_inputDevolver__GSNyO"}},5213:function(e){e.exports={header:"VentaIndividual_header__25Dp0",container:"VentaIndividual_container__6_kvg",fooder:"VentaIndividual_fooder___Ne1c",titulo:"VentaIndividual_titulo__E7VgP",texto:"VentaIndividual_texto__jyrCW",nombre:"VentaIndividual_nombre__LTnlW",disponible:"VentaIndividual_disponible__Qucpn",precio:"VentaIndividual_precio__qIzbB",vender:"VentaIndividual_vender__uURD3",input:"VentaIndividual_input__8hXaU"}},5150:function(e){e.exports={header:"VisualizarDevueltos_header__fbNuh",container:"VisualizarDevueltos_container__9lynv",fooder:"VisualizarDevueltos_fooder__gYJqN",titulo:"VisualizarDevueltos_titulo__uj4aA",texto:"VisualizarDevueltos_texto__wglH4",nombre:"VisualizarDevueltos_nombre__EUciG",cantidad:"VisualizarDevueltos_cantidad__jl0HL",deshacer:"VisualizarDevueltos_deshacer__3xXAV"}},6660:function(e){e.exports={cuadrado1:"LoadingData_cuadrado1__x1QGj",cuadrado2:"LoadingData_cuadrado2__hOwqp",moverCuadrado1:"LoadingData_moverCuadrado1__vWwXS",moverCuadrado2:"LoadingData_moverCuadrado2__gm3Qs",modal:"LoadingData_modal__Rqj2p",show:"LoadingData_show__jLq8l"}}},function(e){e.O(0,[8154,1316,7123,8153,6307,7648,4868,3875,2971,2117,1744],function(){return e(e.s=6752)}),_N_E=e.O()}]);