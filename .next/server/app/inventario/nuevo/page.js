(()=>{var e={};e.id=3109,e.ids=[3109],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},63393:(e,a,o)=>{"use strict";o.r(a),o.d(a,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>v,tree:()=>c}),o(28526),o(23658),o(10468),o(91837);var r=o(23191),t=o(88716),n=o(37922),s=o.n(n),i=o(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);o.d(a,l);let c=["",{children:["inventario",{children:["nuevo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,28526)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\inventario\\nuevo\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(o.bind(o,23658)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\layout.jsx"],loading:[()=>Promise.resolve().then(o.bind(o,10468)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(o.bind(o,91837)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\inventario\\nuevo\\page.jsx"],u="/inventario/nuevo/page",p={require:o,loadChunk:()=>Promise.resolve()},v=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/inventario/nuevo/page",pathname:"/inventario/nuevo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19797:(e,a,o)=>{Promise.resolve().then(o.bind(o,56940))},56940:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>v});var r=o(10326),t=o(17577),n=o(90434),s=o(83074),i=o.n(s);o(80256);var l=o(72557),c=o(77109),d=o(35047),u=o(81608);let p=()=>Math.floor(1e6+9e7*Math.random()),v=function(){let{data:e,status:a}=(0,c.useSession)();(0,d.useRouter)();let[o,s]=(0,t.useState)(null),[v,h]=(0,t.useState)(""),[_,m]=(0,t.useState)(!0),[x,g]=(0,t.useState)(!1),[j,P]=(0,t.useState)(!1),[y,f]=(0,t.useState)(!1),[S,b]=(0,t.useState)(!1),[C,N]=(0,t.useState)(!1),[w,I]=(0,t.useState)(!1),[O,k]=(0,t.useState)(!1),[E,T]=(0,t.useState)(!1),[A,D]=(0,t.useState)(!1),[q,F]=(0,t.useState)(!1),[J,M]=(0,t.useState)([]),[U,z]=(0,t.useState)([]),[V,$]=(0,t.useState)([]),[G,R]=(0,t.useState)(null),[B,K]=(0,t.useState)(p()),[L,W]=(0,t.useState)(""),[H,X]=(0,t.useState)(""),[Q,Y]=(0,t.useState)(""),[Z,ee]=(0,t.useState)(""),[ea,eo]=(0,t.useState)(""),[er,et]=(0,t.useState)(""),[en,es]=(0,t.useState)(p()),[ei,el]=(0,t.useState)(""),[ec,ed]=(0,t.useState)(0),[eu,ep]=(0,t.useState)(""),[ev,eh]=(0,t.useState)(""),[e_,em]=(0,t.useState)(0),[ex,eg]=(0,t.useState)(""),[ej,eP]=(0,t.useState)(!1),[ey,ef]=(0,t.useState)(!1),eS=e=>{fetch(`/api/inventario/proveedores/${e}`).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{$(e),console.log(e)}).catch(e=>{h(e),s(!1)})},eb=e=>{let a=J.find(a=>a.prov_id==e);e>0?(K(a.prov_id),W(a.prov_nombre),X(a.prov_direccion),Y(a.prov_numero_cont),ee(a.prov_municipio),eo(a.prov_estado),et(a.prov_rfc),eS(a.prov_id),k(!0)):(K(p()),W(""),X(""),Y(""),ee(""),eo(""),et(""),k(!1)),D(!1)},eC=e=>{let a=U.find(a=>a.produc_id==e);e>0?(es(a.produc_id),el(a.produc_nombre),ed(a.produc_precio_venta),ep(a.produc_parti_fun),eh(a.produc_parti_enlace),T(!0),R(a)):(es(p()),el(""),ed(0),ep(0),eh(0),T(!1))},eN=()=>{console.log("validar"),""!=L&&""!=H&&""!=Q&&""!=Z&&""!=ea&&""!=er?(D(!1),g(!0),m(!1)):D(!0)},ew=()=>{""!=ei&&0!=e_&&0!=ec&&0!=ex?(F(!1),g(!1),P(!0)):F(!0)},eI=async()=>{y||((await fetch("/api/proveedores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prov_id:B,prov_nombre:L,prov_direccion:H,prov_numero_cont:Q,prov_municipio:Z,prov_estado:ea,prov_rfc:er})})).ok?console.log("Proveedor agregado"):console.log("Error al agregar proveedor")),S?(await fetch(`/api/productos/${en}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({produc_existencias:Number(G.produc_existencias)+Number(ex)})})).ok?console.log("Producto actualizado"):console.log("Error al actualizar producto"):(await fetch("/api/productos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({produc_id:en,produc_nombre:ei,produc_precio_venta:ec,produc_existencias:ex,produc_parti_fun:eu,produc_parti_enlace:ev})})).ok?console.log("Producto agregado"):console.log("Error al agregar producto"),C||((await fetch("/api/inventario",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prov_id:B,produc_id:en})})).ok?console.log("Proveedor Producto agregado"):console.log("Error al agregar proveedor producto"));try{let e=new Date,a={produc_id:en,hist_estado:"Entrada",hist_cantidad:ex,hist_precio_ent_sal:e_,hist_hora:(0,u.P4)(),hist_dia:e.toISOString().split("T")[0]};if(!(await fetch("/api/inventario/historial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Network response was not ok")}catch(e){h(e)}window.location.reload()};return(0,r.jsxs)("div",{children:[r.jsx("div",{className:i().navigationBar,children:(0,r.jsxs)("h4",{children:[r.jsx(n.default,{href:"/inventario",className:i().link,children:"Inventario"})," ","\\"," ",(0,r.jsxs)(n.default,{href:"/inventario/nuevo",className:i().link,children:[" ","Nuevo"," "]})]})}),_&&(0,r.jsxs)("div",{className:i().selectProv,children:[r.jsx("label",{children:"Selecciona un Proveedor Existente: "}),(0,r.jsxs)("select",{className:i().select,onChange:e=>{0===e.target.value?f(!1):(f(!0),eb(e.target.value))},children:[r.jsx("option",{value:0,children:"--Ninguno--"}),J.map((e,a)=>r.jsx("option",{value:e.prov_id,children:e.prov_nombre},a))]})]}),r.jsx("div",{className:i().containerProv,children:_?(0,r.jsxs)("div",{children:[r.jsx("h3",{children:"Datos del Proveedor"}),(0,r.jsxs)("div",{children:[r.jsx(l.II,{placeholder:"Nombre del Proveedor",value:L,onChange:e=>W(e),validation:A,readOnly:O,type:"text"}),r.jsx(l.II,{placeholder:"Direcci\xf3n",value:H,onChange:e=>X(e),validation:A,readOnly:O,type:"text"}),r.jsx(l.II,{placeholder:"Tel\xe9fono",value:Q,onChange:e=>Y(e),validation:A,readOnly:O,type:"number"}),r.jsx(l.II,{placeholder:"Municipio",value:Z,onChange:e=>ee(e),validation:A,readOnly:O,type:"text"}),r.jsx(l.II,{placeholder:"Estado",value:ea,onChange:e=>eo(e),validation:A,readOnly:O,type:"text"}),r.jsx(l.II,{placeholder:"RFC",value:er,onChange:e=>et(e),validation:A,readOnly:O,type:"text"}),r.jsx(l.zx,{text:"Aceptar",type:"aceptar",onPress:()=>{eN()}})]}),r.jsx(l.u_,{title:"Advertencia verificar informaci\xf3n",message:`Se creara el Nuevo Proveedor: ${L}, ${H}, ${Z}, ${ea}. Con RFC: ${er}`,show:ej,handleAccept:()=>{},handleClose:()=>{eP(!1)}})]}):(0,r.jsxs)("div",{className:i().overViewProv,children:[(0,r.jsxs)("p",{children:[L," a RFC: ",er,", Tel. ",Q,", Direcci\xf3n:"," ",H,", ",Z,", ",ea,"."," "]}),r.jsx(l.zx,{text:"Cambiar",type:"aceptar",onPress:()=>{g(!1),m(!0)}})]})}),x?(0,r.jsxs)("div",{className:i().selectProv,children:[r.jsx("label",{children:"Seleccionar producto relacionado: "}),(0,r.jsxs)("select",{className:i().select,onChange:e=>{eC(e.target.value),0!=e.target.value?(b(!0),N(!0)):(b(!1),N(!1))},disabled:w,children:[r.jsx("option",{value:0,children:"--Ninguno--"}),V.map((e,a)=>r.jsx("option",{value:e.produc_id,children:e.produc_nombre},a))]}),r.jsx("label",{children:"Seleccionar producto existente: "}),(0,r.jsxs)("select",{className:i().select,onChange:e=>{eC(e.target.value),0!=e.target.value?(I(!0),b(!0)):(b(!1),I(!1))},disabled:C,children:[r.jsx("option",{value:0,children:"--Ninguno--"}),U.map((e,a)=>r.jsx("option",{value:e.produc_id,children:e.produc_nombre},a))]})]}):r.jsx(r.Fragment,{children:_?r.jsx("div",{className:i().selectProduc,children:r.jsx("p",{children:"Seleccionar un Proveedor primero"})}):(0,r.jsxs)("div",{className:i().overViewProduc,children:[(0,r.jsxs)("p",{children:["Pedido de ",ex," ",ei," comprado a ",e_," ","para vender a ",ec]}),r.jsx(l.zx,{text:"Cambiar",type:"aceptar",onPress:()=>{g(!0),P(!1)}})]})}),x&&(0,r.jsxs)("div",{className:i().formProduct,children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{children:"Datos del Producto"}),r.jsx(l.II,{placeholder:"Nombre del Producto",value:ei,onChange:e=>{el(e)},type:"text",validation:q,readOnly:E}),r.jsx(l.II,{placeholder:"Participacion Fundaci\xf3n",value:eu,onChange:e=>{ep(Number(e))},type:"number",validation:q,readOnly:E}),r.jsx(l.II,{placeholder:"Participacion Enlace",value:ev,onChange:e=>{eh(Number(e))},type:"number",validation:q,readOnly:E})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{children:"Datos de adquicicion"}),r.jsx(l.II,{placeholder:"Precio de Compra",value:e_,onChange:e=>{em(Number(e))},type:"number",validation:q}),r.jsx(l.II,{placeholder:"Precio de Venta a Publico",value:ec,onChange:e=>{ed(Number(e))},type:"number",validation:q,readOnly:E}),r.jsx(l.II,{placeholder:"Cantidad Suministrada",value:ex,onChange:e=>{eg(Number(e))},type:"number",validation:q})]}),r.jsx(l.zx,{text:"Aceptar",type:"aceptar",onPress:()=>{ew()}})]}),j&&(0,r.jsxs)("div",{className:i().formComplete,children:[r.jsx("p",{children:"Listo para agregar una nueva entrada al inventario"}),r.jsx(l.zx,{text:"Aceptar",type:"cancelar",onPress:()=>{ef(!0)}})]}),r.jsx(l.u_,{show:ey,title:"Nuevo Producto",message:"Se creara un nuevo producto",handleClose:()=>{ef(!1)},handleAccept:()=>{eI()}})]})}},83074:e=>{e.exports={navigationBar:"page_navigationBar___rNRA",link:"page_link__3NoLb",containerProv:"page_containerProv__gKtEK",selectProv:"page_selectProv__Uou8W",select:"page_select__9KWM6",overViewProv:"page_overViewProv__ecxB_",overViewProduc:"page_overViewProduc__qkPmw",selectProduc:"page_selectProduc__vBM1_",formProduct:"page_formProduct__Hn_Aw",formComplete:"page_formComplete__jIoMv"}},28526:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>r});let r=(0,o(68570).createProxy)(String.raw`C:\Users\eloym\Documents\Fundacion Jalisco\fj_sistema_gen\src\app\inventario\nuevo\page.jsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var o=e=>a(a.s=e),r=a.X(0,[8948,1404,434,4424],()=>o(63393));module.exports=r})();