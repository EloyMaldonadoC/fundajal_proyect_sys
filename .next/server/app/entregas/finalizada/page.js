(()=>{var e={};e.id=3713,e.ids=[3713],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},65176:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>r.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(23593),s(23658),s(10468),s(91837);var t=s(23191),n=s(88716),o=s(37922),r=s.n(o),i=s(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(a,l);let d=["",{children:["entregas",{children:["finalizada",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23593)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\entregas\\finalizada\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,23658)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\layout.jsx"],loading:[()=>Promise.resolve().then(s.bind(s,10468)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(s.bind(s,91837)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\entregas\\finalizada\\page.jsx"],u="/entregas/finalizada/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/entregas/finalizada/page",pathname:"/entregas/finalizada",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},35855:(e,a,s)=>{Promise.resolve().then(s.bind(s,87615))},87615:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>P});var t=s(10326),n=s(72557),o=s(95152),r=s.n(o),i=s(80256),l=s(35298),d=s.n(l),c=s(90434),u=s(35047),p=s(17577),x=s(81608),g=s(65764),_=s(91575),m=s(86015),h=s(71367),j=s(65284),v=s(15169),f=s(30020),S=s(84638),b=s(77109);let P=function(){(0,u.useRouter)();let e=(0,u.useSearchParams)().get("id"),{data:a,status:s}=(0,b.useSession)(),[o,l]=(0,p.useState)(!0),[P,N]=(0,p.useState)(""),[y,C]=(0,p.useState)(!1),[z,E]=(0,p.useState)(!1),[Z,D]=(0,p.useState)(!1),[w,F]=(0,p.useState)(!1),[k,q]=(0,p.useState)(!1),[A,T]=(0,p.useState)(!0),[I,J]=(0,p.useState)(!1),[G,O]=(0,p.useState)(!0),[U,V]=(0,p.useState)(!1),[M,H]=(0,p.useState)(!1),[L,R]=(0,p.useState)(null),[B,$]=(0,p.useState)(0),[K,Q]=(0,p.useState)(0),[X,Y]=(0,p.useState)(0),[W,ee]=(0,p.useState)([]),[ea,es]=(0,p.useState)(!1),[et,en]=(0,p.useState)(0),[eo,er]=(0,p.useState)(""),[ei,el]=(0,p.useState)(""),[ed,ec]=(0,p.useState)(""),[eu,ep]=(0,p.useState)([]),[ex,eg]=(0,p.useState)([]),[e_,em]=(0,p.useState)([]),[eh,ej]=(0,p.useState)([]),[ev,ef]=(0,p.useState)([]),[eS,eb]=(0,p.useState)([]),[eP,eN]=(0,p.useState)([]),[ey,eC]=(0,p.useState)([]),[ez,eE]=(0,p.useState)([]),[eZ,eD]=(0,p.useState)([]),[ew,eF]=(0,p.useState)([]),[ek,eq]=(0,p.useState)([]),[eA,eT]=(0,p.useState)([]),[eI,eJ]=(0,p.useState)([]),[eG,eO]=(0,p.useState)([]),[eU,eV]=(0,p.useState)([]),eM=()=>{console.log("monto",et),console.log("fecha",eo),console.log("metodo",ei),console.log("descripcion",ed),et>0&&""!=eo&&""!=ei&&""!=ed?D(!0):F(!0)},eH=async()=>{try{if(!(await fetch(`/api/entregas/deudas/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deu_estado:Number(K)-Number(et)<=0?"saldada":"pendiente",deu_deuda_pendiente:Number(K)-Number(et)<=0?0:Number(K)-Number(et)})})).ok)throw Error("Response is not ok");(await fetch("/api/entregas/deudas/pagos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deu_id:L,pag_monto:et,pag_metodo:ei,pag_desc:ed,pag_fecha_transac:eo})})).ok&&(C(!y),es(!1),en(0),er(""),el(""),ec("")),D(!1)}catch(e){N(e)}};return o?t.jsx("div",{className:r().loadingScreen,children:t.jsx(i.Z,{})}):P?t.jsx("div",{className:r().error,children:(0,t.jsxs)("div",{className:r().errorContent,children:[t.jsx(d(),{className:r().textIcon,name:"cloud-offline-outline"}),t.jsx("p",{className:r().textError,children:"No hay Conexi\xf3n"})]})}):(0,t.jsxs)("div",{children:[t.jsx("div",{className:r().navegacion,children:(0,t.jsxs)("h4",{children:[t.jsx(c.default,{href:"/entregas",className:r().link,children:"Entregas"})," ","\\ Finalizada \\"," ",0!=eu.length?`${ex.cli_municipio}, ${ex.cli_estado}.`:"Cargando..."]})}),t.jsx("div",{className:r().herramientas,children:0!=eu.length&&(0,t.jsxs)("p",{children:["Entrega realizada el d\xeda"," ",t.jsx("b",{children:(0,x.ji)(eu.en_dia_entrega)})," a las"," ",(0,t.jsxs)("b",{children:[(0,x.ln)(eu.en_hora_entrega)," hrs"]})]})}),(0,t.jsxs)("div",{className:r().contenido,children:[(0,t.jsxs)("div",{className:r().subContenedor1,children:[(0,t.jsxs)("div",{className:r().herramientasContenido,children:[t.jsx(n.zx,{text:"Entrgados",type:G?"":"cancelar",onPress:()=>{O(!0),V(!1),H(!1)}}),0!=eU.length&&t.jsx(n.zx,{text:"Venta Individual",type:U?"":"cancelar",onPress:()=>{O(!1),V(!0),H(!1)}}),t.jsx(n.zx,{text:"Contenido",type:M?"":"cancelar",onPress:()=>{O(!1),V(!1),H(!0)}})]}),G&&t.jsx(j.Z,{paquetes:ez,productos:eS,totalAPagar:()=>{}}),U&&t.jsx(v.Z,{listaVentasIndividuales:eU}),M&&(0,t.jsxs)("div",{children:[t.jsx(S.Z,{productos:ew}),0!=eG.length&&t.jsx(f.Z,{titulo:"Productos Devueltos",listaProductos:eG}),0!=ek.length&&t.jsx(f.Z,{titulo:"Productos da\xf1ados",listaProductos:ek,alterButton:"repuesto",onDelete:e=>{eliminarDeListaDaÃ±ado(e),setIsSaved(!1)}}),0!=eA.length&&t.jsx(f.Z,{titulo:"Productos extraviados",listaProductos:eA,alterButton:"repuesto",onDelete:e=>{eliminarDeListaExtraviado(e),setIsSaved(!1)}}),0!=eI.length&&t.jsx(f.Z,{titulo:"Productos no encontrados",listaProductos:eI,alterButton:"repuesto",onDelete:e=>{eliminarDeListaNoEncontrado(e),setIsSaved(!1)}})]})]}),(0,t.jsxs)("div",{className:r().subContenedor2,children:[(0,t.jsxs)("div",{className:r().herramientasInfo,children:[t.jsx(n.zx,{text:k?(0,t.jsxs)(t.Fragment,{children:[t.jsx("p",{children:"Visualizar"}),t.jsx(d(),{className:r().icon,name:"eye-outline"})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("p",{children:"Ocultar"}),t.jsx(d(),{className:r().icon,name:"eye-off-outline"})]}),type:k?"contenido-light":"contenido-dark",onPress:()=>q(!k)}),t.jsx(n.zx,{text:"informaci\xf3n",type:A?"":"cancelar",onPress:()=>{T(!0),J(!1)}}),t.jsx(n.zx,{text:"Pagos",type:I?"":"cancelar",onPress:()=>{T(!1),J(!0)}})]}),!k&&(0,t.jsxs)(t.Fragment,{children:[A&&(0,t.jsxs)("div",{className:r().scrollable,children:[t.jsx(g.Z,{municipio:ex}),t.jsx(_.Z,{empleados:eh,encargado:e_}),t.jsx(m.Z,{vehiculos:ev})]}),I&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:r().menuPagos,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[t.jsx("b",{children:"Deuda: "}),(0,x.uf)(B)]}),(0,t.jsxs)("p",{children:[t.jsx("b",{children:"Abono: "}),(0,x.uf)(X)]}),(0,t.jsxs)("p",{children:[t.jsx("b",{children:"Saldo Restante:"})," ",z?"Cuenta saldada":(0,x.uf)((()=>{let e=B-X-W.reduce((e,a)=>e+a.pag_monto,0);return e<=0&&(E(!0),console.log("deuda saldada")),e})())]})]}),!z&&t.jsx(n.zx,{text:ea?"Contraer":"Nuevo pago",type:ea?"":"cancelar",onPress:()=>es(!ea)}),ea&&(0,t.jsxs)("div",{className:r().formulario,children:[(0,t.jsxs)("form",{children:[t.jsx("label",{children:"Monto:"}),t.jsx("input",{type:"number",min:0,className:r().input,value:et,onChange:e=>en(e.target.value)}),t.jsx("label",{children:"Fecha:"}),t.jsx("input",{type:"date",className:r().date,value:eo,onChange:e=>er(e.target.value)}),t.jsx("label",{children:"M\xe9todo de pago:"}),(0,t.jsxs)("select",{className:r().select,value:ei,onChange:e=>el(e.target.value),children:[t.jsx("option",{value:"",children:"-Seleccione m\xe9todo-"}),t.jsx("option",{value:"efectivo",children:"Efectivo"}),t.jsx("option",{value:"transferencia",children:"Transferencia"})]}),(0,t.jsxs)("section",{className:r().sectionTextarea,children:[t.jsx("label",{children:"Comentario:"}),t.jsx("textarea",{className:r().textarea,value:ed,onChange:e=>ec(e.target.value)})]})]}),t.jsx(n.zx,{text:"Guardar",type:"cancelar",onPress:()=>eM()})]})]}),0!=W.length?t.jsx("div",{className:r().scrollablePagos,children:W.map(e=>t.jsx(h.Z,{pago:e},e.pag_id))}):t.jsx("div",{className:r().errorContent,children:t.jsx("p",{className:r().textNoFound,children:"No hay pagos"})})]})]})]})]}),t.jsx(n.u_,{title:"Nuevo Pago",show:Z,message:"\xbfDesea agregar el nuevo pago?",handleAccept:()=>{eH()},handleClose:()=>D(!1)}),t.jsx(n.bZ,{title:"Datos del pago invalidos",message:"Por favor, complete todos los campos o introdusca un monto valido",show:w,handleAccept:()=>F(!1)})]})}},95152:e=>{e.exports={navegacion:"page_navegacion__0Zzvg",link:"page_link__CkflS",herramientas:"page_herramientas__4Y0JM",contenido:"page_contenido__7HhkT",herramientasInfo:"page_herramientasInfo__Owinv",icon:"page_icon__eqP_E",herramientasContenido:"page_herramientasContenido__4xgpw",select:"page_select__7qdmA",option:"page_option__zjopT",inputNumberContainer:"page_inputNumberContainer__2pHtA",inputNumber:"page_inputNumber__pgO5s",subContenedor1:"page_subContenedor1__cNi3b",subContenedor2:"page_subContenedor2__TVyHw",scrollable:"page_scrollable__sQ9cg",scrollablePagos:"page_scrollablePagos__m485e",loadingScreen:"page_loadingScreen__vE_xn",error:"page_error__VKyhG",textIcon:"page_textIcon___hv_0",textNoFound:"page_textNoFound__FEVdy",textError:"page_textError__vfJ0u",errorContent:"page_errorContent__LsHAb",menuPagos:"page_menuPagos__c2Zs1",formulario:"page_formulario__Zm4jp",input:"page_input__AZlcr",date:"page_date__C1m7V",sectionTextarea:"page_sectionTextarea__fukE7",textarea:"page_textarea__ZpqJd"}},23593:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\Users\eloym\Documents\Fundacion Jalisco\fj_sistema_gen\src\app\entregas\finalizada\page.jsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[8948,1404,434,4424,7330],()=>s(65176));module.exports=t})();