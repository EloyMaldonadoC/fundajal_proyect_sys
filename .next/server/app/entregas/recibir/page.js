(()=>{var e={};e.id=8191,e.ids=[8191],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},80795:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>t.a,__next_app__:()=>u,originalPathname:()=>_,pages:()=>l,routeModule:()=>p,tree:()=>d}),r(89241),r(23658),r(10468),r(91837);var s=r(23191),n=r(88716),o=r(37922),t=r.n(o),i=r(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(a,c);let d=["",{children:["entregas",{children:["recibir",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,89241)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\entregas\\recibir\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,23658)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\layout.jsx"],loading:[()=>Promise.resolve().then(r.bind(r,10468)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,91837)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\entregas\\recibir\\page.jsx"],_="/entregas/recibir/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/entregas/recibir/page",pathname:"/entregas/recibir",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},36562:(e,a,r)=>{Promise.resolve().then(r.bind(r,46427))},46427:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>S});var s=r(10326),n=r(17577),o=r(34938),t=r.n(o),i=r(35047),c=r(90434),d=r(80256),l=r(35298),_=r.n(l),u=r(72557),p=r(65764),m=r(91575),h=r(86015),x=r(53763),g=r.n(x);let j=function({value:e,onSelect:a,onUnselect:r,estado:o}){let[t,i]=(0,n.useState)(!1);return s.jsx("div",{children:s.jsx("input",{type:"checkbox",className:g().checkbox,value:e,checked:t,onChange:e=>{let s=e.target.value;t?r(s):a(s),i(!t)}})})};var b=r(18445),v=r.n(b);let N=function({listaProductos:e,salida:a}){let r=r=>{a(e.map(e=>e.produc_id==r?{...e,en_es_produc_estado:"recibido"}:e))},n=r=>{a(e.map(e=>e.produc_id==r?{...e,en_es_produc_estado:"cargado"}:e))};return(0,s.jsxs)("div",{children:[s.jsx("div",{className:v().header,children:s.jsx("h3",{children:"Productos a entregar"})}),(0,s.jsxs)("div",{className:v().titulo,children:[s.jsx("h4",{className:v().nombre,children:"Producto"}),s.jsx("h4",{className:v().cantidad,children:"cantidad"}),s.jsx("h4",{className:v().checkBox,children:"Listo"})]}),e&&e.map((e,a)=>(0,s.jsxs)("div",{className:v().container,children:[s.jsx("div",{className:v().nombre,children:e.produc_nombre}),s.jsx("div",{className:v().cantidad,children:e.en_es_produc_cant}),s.jsx("div",{className:v().checkBox,children:s.jsx(j,{estado:e.en_es_produc_estado,value:e.produc_id,onSelect:e=>{r(e)},onUnselect:e=>{n(e)}})})]},a)),s.jsx("div",{className:v().fooder})]})};var f=r(30020),E=r(77109),C=r(28428);let P=e=>{if(null==e)return"A\xfan no se ha programado una fecha de entrega";{let a=new Date(e),r=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][a.getUTCDay()],s=a.getUTCDate(),n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][a.getUTCMonth()],o=a.getUTCFullYear();return`${r} ${s} de ${n} del ${o}`}},y=e=>{if(null==e)return"Hora no especificada";{let[a,r]=e.split(":");return`${a}:${r}`}},S=function(){let e=(0,i.useSearchParams)(),a=(0,i.useRouter)(),r=e.get("id"),{data:o}=(0,E.useSession)(),[l,x]=(0,n.useState)(!0),[g,j]=(0,n.useState)(""),[b,v]=(0,n.useState)(!1),[S,T]=(0,n.useState)(!1),[D,w]=(0,n.useState)(!1),[k,U]=(0,n.useState)(!0),[V,Z]=(0,n.useState)(!1),[z,G]=(0,n.useState)(0),[R,F]=(0,n.useState)(0),[J,M]=(0,n.useState)(""),[A,I]=(0,n.useState)(0),[L,q]=(0,n.useState)([]),[$,O]=(0,n.useState)([]),[B,X]=(0,n.useState)([]),[Q,K]=(0,n.useState)([]),[Y,W]=(0,n.useState)([]),[H,ee]=(0,n.useState)([]),[ea,er]=(0,n.useState)([]),es=()=>{if(0!=R&&""!=J&&0!=A){let e={...Q.find(e=>e.produc_id==R),en_es_produc_cant:Number(A),en_es_produc_estado:J};if("da\xf1ado"==J){let a=H.find(e=>e.produc_id==R);console.log(a),a?(ee(H.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(A),en_es_produc_estado:J}:e)),K(Q.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)+Number(a.en_es_produc_cant)-Number(A)}:e))):(K(Q.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)-Number(A)}:e)),ee([...H,e]))}else if("extraviado"==J){let a=Y.find(e=>e.produc_id==R);a?(W(Y.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(A),en_es_produc_estado:J}:e)),K(Q.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)+Number(a.en_es_produc_cant)-Number(A)}:e))):(K(Q.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)-Number(A)}:e)),W([...Y,e]))}else if("no encontrado"==J){let a=ea.find(e=>e.produc_id==R);a?(er(ea.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(A),en_es_produc_estado:J}:e)),K(Q.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)+Number(a.en_es_produc_cant)-Number(A)}:e))):(K(Q.map(e=>e.produc_id==R?{...e,en_es_produc_cant:Number(e.en_es_produc_cant)-Number(A)}:e)),er([...ea,e]))}I(0),M(0),F(0)}},en=e=>{let a=Q.find(a=>a.produc_id==e);F(e),G(a.en_es_produc_cant)},eo=e=>{let a=Y.find(a=>a.produc_id==e);W(Y.filter(a=>a.produc_id!=e)),K(Q.map(r=>r.produc_id==e?{...r,en_es_produc_cant:Number(r.en_es_produc_cant)+Number(a.en_es_produc_cant)}:r))},et=e=>{let a=H.find(a=>a.produc_id==e);ee(H.filter(a=>a.produc_id!=e)),K(Q.map(r=>r.produc_id==e?{...r,en_es_produc_cant:Number(r.en_es_produc_cant)+Number(a.en_es_produc_cant)}:r))},ei=e=>{let a=ea.find(a=>a.produc_id==e);er(ea.filter(a=>a.produc_id!=e)),K(Q.map(r=>r.produc_id==e?{...r,en_es_produc_cant:Number(r.en_es_produc_cant)+Number(a.en_es_produc_cant)}:r))},ec=async()=>{if(!k){w(!0);try{let e=[...Q,...H,...Y,...ea];if(console.log(e),!(await fetch(`/api/entregas/productos/status/${r}`,{method:"DELETE"})).ok||!(await fetch("/api/entregas/productos/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Response is not ok");U(!0)}catch(e){j(e)}w(!1)}},ed=()=>{Q.some(e=>"cargado"==e.en_es_produc_estado)?T(!0):v(!0)},el=async()=>{if(k){try{await fetch(`/api/entregas/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({en_estado:"recibido"})}).then(e=>{if(!e.ok)throw Error("Response is not ok");return e.json()}).catch(e=>{j(e)})}catch(e){j(e)}a.push(`/entregas/recibido?id=${r}`)}};return l?s.jsx("div",{className:t().loadingScreen,children:s.jsx(d.Z,{})}):g?s.jsx("div",{className:t().error,children:(0,s.jsxs)("div",{className:t().errorContent,children:[s.jsx(_(),{className:t().textIcon,name:"cloud-offline-outline"}),s.jsx("p",{className:t().textError,children:"No hay Conexi\xf3n"})]})}):(0,s.jsxs)("div",{children:[s.jsx("div",{className:t().navegacion,children:(0,s.jsxs)("h4",{children:[s.jsx(c.default,{href:"/entregas",className:t().link,children:"Entregas"})," ","\\ Recibir \\"," ",0!=L.length?`${L.cli_municipio}, ${L.cli_estado}.`:"Cargando..."]})}),(0,s.jsxs)("div",{className:t().herramientas,children:[0!=L.length&&(0,s.jsxs)("p",{children:["Entrega programada para el d\xeda"," ",s.jsx("b",{children:P(L.en_dia_entrega)})," a las"," ",(0,s.jsxs)("b",{children:[y(L.en_hora_entrega)," hrs"]})]}),(0,s.jsxs)("div",{children:[s.jsx(u.zx,{text:"Terminado",onPress:()=>{ed(),ec()}}),s.jsx(u.zx,{text:k?"Guardado":"Guardar",type:"cancelar",onPress:()=>ec()})]})]}),(0,s.jsxs)("div",{className:t().contenido,children:[(0,s.jsxs)("div",{className:t().subContenedor1,children:[(0,s.jsxs)("div",{className:t().cambiarEstado,children:[(0,s.jsxs)("select",{className:t().select,onChange:e=>{en(e.target.value)},value:R,children:[s.jsx("option",{value:0,children:"-Seleccionar producto-"}),Q.map((e,a)=>s.jsx("option",{value:e.produc_id,children:e.produc_nombre},a))]}),(0,s.jsxs)("select",{className:t().select,onChange:e=>M(e.target.value),value:J,children:[s.jsx("option",{className:t().option,value:0,children:"-Seleccionar estado-"}),s.jsx("option",{className:t().option,value:"extraviado",children:"Extraviado"}),s.jsx("option",{className:t().option,value:"da\xf1ado",children:"Da\xf1ado"}),s.jsx("option",{className:t().option,value:"no encontrado",children:"No encontrado"})]}),(0,s.jsxs)("div",{className:t().inputNumberContainer,children:[s.jsx("label",{children:"Cantidad: "}),s.jsx("input",{className:t().inputNumber,type:"number",min:0,max:z,value:A,onChange:e=>I(e.target.value)})]}),s.jsx(u.zx,{text:"Aceptar",type:"cancelar",onPress:()=>{es(),U(!1)}})]}),s.jsx(N,{listaProductos:Q,salida:e=>{K(e),U(!1)}}),0!=Y.length&&s.jsx(f.Z,{titulo:"Productos Extraviados",listaProductos:Y,onDelete:e=>{eo(e),U(!1)}}),0!=ea.length&&s.jsx(f.Z,{titulo:"Productos No encontrados",listaProductos:ea,onDelete:e=>{ei(e),U(!1)}}),0!=H.length&&s.jsx(f.Z,{titulo:"Productos Da\xf1ados",listaProductos:H,onDelete:e=>{et(e),U(!1)}})]}),(0,s.jsxs)("div",{className:t().subContenedor2,children:[s.jsx("div",{className:t().herramientasInfo,children:s.jsx(u.zx,{text:V?(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{children:"Visualizar"}),s.jsx(_(),{className:t().icon,name:"eye-outline"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{children:"Ocultar"}),s.jsx(_(),{className:t().icon,name:"eye-off-outline"})]}),type:V?"contenido-light":"contenido-dark",onPress:()=>Z(!V)})}),!V&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(p.Z,{municipio:L}),s.jsx(m.Z,{encargado:L,empleados:$}),s.jsx(h.Z,{vehiculos:B})]})]})]}),s.jsx(u.u_,{show:b,title:"Productos recibidos",message:"\xbfTodos los productos han sido recibidos?",handleClose:()=>v(!1),handleAccept:()=>{el(),w(!0)}}),s.jsx(u.bZ,{show:S,title:"Falta verificaci\xf3n",message:"No se han verificato todos los productos",handleAccept:()=>T(!1)}),s.jsx(C.Z,{show:D})]})}},28428:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});var s=r(10326),n=r(73730),o=r.n(n);let t=function({show:e}){return s.jsx("div",{className:`${o().modal} ${e?o().show:""}`,children:(0,s.jsxs)("div",{className:o().contenedor,children:[s.jsx("div",{className:o().cuadrado1}),s.jsx("div",{className:o().cuadrado2})]})})}},65764:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});var s=r(10326),n=r(49895),o=r.n(n);let t=function({municipio:e}){return(0,s.jsxs)("div",{children:[s.jsx("div",{className:o().header,children:s.jsx("h3",{children:"Municipio"})}),s.jsx("div",{className:o().container,children:e?(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[s.jsx("span",{children:"Municipio: "}),e.cli_municipio,", ",e.cli_estado]}),(0,s.jsxs)("p",{children:[s.jsx("span",{children:"Enlace: "}),e.cli_nombre]}),(0,s.jsxs)("p",{children:[s.jsx("span",{children:"Contacto: "}),e.cli_numero_contac]})]}):s.jsx("div",{children:s.jsx("p",{children:"Cargando..."})})}),s.jsx("div",{className:o().fooder})]})}},30020:(e,a,r)=>{"use strict";r.d(a,{Z:()=>i});var s=r(10326),n=r(72557),o=r(96570),t=r.n(o);let i=function({titulo:e,listaProductos:a,onDelete:r,alterButton:o}){return(0,s.jsxs)("div",{children:[s.jsx("div",{className:t().header,children:s.jsx("h3",{children:e})}),(0,s.jsxs)("div",{className:t().titulo,children:[s.jsx("h4",{className:t().nombre,children:"Nombre"}),s.jsx("h4",{className:t().cantidad,children:"cantidad"}),s.jsx("h4",{className:t().option,children:o&&"opciones"})]}),a&&a.map((e,a)=>(0,s.jsxs)("div",{className:t().container,children:[s.jsx("div",{className:t().nombre,children:e.produc_nombre}),s.jsx("div",{className:t().cantidad,children:e.en_es_produc_cant}),s.jsx("div",{className:t().option,children:o&&s.jsx(n.zx,{text:o||"Eliminar",type:"cancelar",onPress:()=>r(e.produc_id)})})]},a)),s.jsx("div",{className:t().fooder})]})}},91575:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});var s=r(10326),n=r(44556),o=r.n(n);let t=function({encargado:e,empleados:a}){return(0,s.jsxs)("div",{children:[s.jsx("div",{className:o().header,children:s.jsx("h3",{children:"Personal"})}),(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsxs)("p",{className:o().nombre,children:[s.jsx("b",{children:"Encargado: "}),e.emp_nombre," ",e.emp_apellido]}),a&&s.jsx(s.Fragment,{children:a.map((e,a)=>(0,s.jsxs)("p",{className:o().nombre,children:[(0,s.jsxs)("b",{children:[e.emp_rol,": "]}),e.emp_nombre," ",e.emp_apellido]},a))})]}),s.jsx("div",{className:o().fooder})]})}},86015:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});var s=r(10326),n=r(3449),o=r.n(n);let t=function({vehiculos:e}){return(0,s.jsxs)("div",{children:[s.jsx("div",{className:o().header,children:s.jsx("h3",{children:"Vehiculos"})}),s.jsx("div",{className:o().container,children:0!=e.length?s.jsx(s.Fragment,{children:e.map((e,a)=>(0,s.jsxs)("p",{children:[e.ve_marca," ",e.ve_modelo," ",e.ve_ano]},a))}):s.jsx("p",{children:"A\xfan no se han asignado vehiculos"})}),s.jsx("div",{className:o().fooder})]})}},34938:e=>{e.exports={navegacion:"page_navegacion__tVAPM",link:"page_link__u3_JC",herramientas:"page_herramientas__vYuYK",contenido:"page_contenido__drjtT",herramientasInfo:"page_herramientasInfo__ij7Ju",icon:"page_icon__z6Ztn",cambiarEstado:"page_cambiarEstado__4_eUv",select:"page_select__OGma8",option:"page_option__uyA7r",inputNumberContainer:"page_inputNumberContainer__Ewirc",inputNumber:"page_inputNumber__KulOD",subContenedor1:"page_subContenedor1__KgXiB",subContenedor2:"page_subContenedor2__Z2VLu",loadingScreen:"page_loadingScreen__Em6NC",error:"page_error__gLioU",textIcon:"page_textIcon__Dag_x",textError:"page_textError__lvZt4",errorContent:"page_errorContent__heUv4"}},53763:e=>{e.exports={checkbox:"CheckBoxRecibir_checkbox__7E6i_"}},49895:e=>{e.exports={header:"InfoMunicipio_header__OrBp7",container:"InfoMunicipio_container__8_QG7",fooder:"InfoMunicipio_fooder__wbG4y"}},96570:e=>{e.exports={header:"TablaEstadosEntrega_header__4Q2K3",container:"TablaEstadosEntrega_container__EEXBW",fooder:"TablaEstadosEntrega_fooder__o2nGh",titulo:"TablaEstadosEntrega_titulo__5OXhe",texto:"TablaEstadosEntrega_texto__y_P76",nombre:"TablaEstadosEntrega_nombre__9DUle",cantidad:"TablaEstadosEntrega_cantidad__aQLgF",option:"TablaEstadosEntrega_option__N6reG"}},18445:e=>{e.exports={header:"TablaRecibirEntrega_header___Zswg",container:"TablaRecibirEntrega_container__CsA7R",fooder:"TablaRecibirEntrega_fooder__5XRke",titulo:"TablaRecibirEntrega_titulo__SIjGl",texto:"TablaRecibirEntrega_texto__N2TDe",nombre:"TablaRecibirEntrega_nombre__U1pXN",cantidad:"TablaRecibirEntrega_cantidad__IlqtI",checkBox:"TablaRecibirEntrega_checkBox__3rDdL"}},44556:e=>{e.exports={header:"VisualizarEmpleadosEntrega_header___vimn",container:"VisualizarEmpleadosEntrega_container__2oQwr",fooder:"VisualizarEmpleadosEntrega_fooder__i3vSU",nombre:"VisualizarEmpleadosEntrega_nombre__l0wgl",wrapper:"VisualizarEmpleadosEntrega_wrapper__MBv5l"}},3449:e=>{e.exports={header:"VisualizarVehiculosEntrega_header__JGbGD",container:"VisualizarVehiculosEntrega_container__SFIJK",fooder:"VisualizarVehiculosEntrega_fooder____Ipl",texto:"VisualizarVehiculosEntrega_texto__7i9x_"}},73730:e=>{e.exports={cuadrado1:"LoadingData_cuadrado1__x1QGj",cuadrado2:"LoadingData_cuadrado2__hOwqp",moverCuadrado1:"LoadingData_moverCuadrado1__vWwXS",moverCuadrado2:"LoadingData_moverCuadrado2__gm3Qs",modal:"LoadingData_modal__Rqj2p",show:"LoadingData_show__jLq8l"}},89241:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\eloym\Documents\Fundacion Jalisco\fj_sistema_gen\src\app\entregas\recibir\page.jsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[8948,1404,434,4424],()=>r(80795));module.exports=s})();