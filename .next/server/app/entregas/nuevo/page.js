(()=>{var e={};e.id=1947,e.ids=[1947],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},55146:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>u}),t(10530),t(23658),t(10468),t(91837);var s=t(23191),n=t(88716),r=t(37922),o=t.n(r),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(a,l);let u=["",{children:["entregas",{children:["nuevo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,10530)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\entregas\\nuevo\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,23658)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\layout.jsx"],loading:[()=>Promise.resolve().then(t.bind(t,10468)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(t.bind(t,91837)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\entregas\\nuevo\\page.jsx"],c="/entregas/nuevo/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/entregas/nuevo/page",pathname:"/entregas/nuevo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},7723:(e,a,t)=>{Promise.resolve().then(t.bind(t,556))},556:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var s=t(10326),n=t(17577),r=t(26311),o=t.n(r),i=t(90434),l=t(35047),u=t(11987),d=t(72557),c=t(65284),p=t(77109),m=t(28428);let g=function(){let{data:e,status:a}=(0,p.useSession)(),t=(0,l.useRouter)(),[r,g]=(0,n.useState)(!1),[_,h]=(0,n.useState)(!1),[x,j]=(0,n.useState)(0),[v,b]=(0,n.useState)(0),[f,S]=(0,n.useState)([]),[y,N]=(0,n.useState)(!1),[P,C]=(0,n.useState)([]),[w,q]=(0,n.useState)(!1),[E,k]=(0,n.useState)(null),[D,T]=(0,n.useState)(!1),[J,A]=(0,n.useState)(null),[F,O]=(0,n.useState)(!1),[U,G]=(0,n.useState)(null),[I,L]=(0,n.useState)(null),[z,M]=(0,n.useState)(0),[Q,R]=(0,n.useState)(0),[Z,V]=(0,n.useState)(0),[X,B]=(0,n.useState)(0),[H,K]=(0,n.useState)(0),[Y,W]=(0,n.useState)(!0),[$,ee]=(0,n.useState)(!1),[ea,et]=(0,n.useState)(!1),[es,en]=(0,n.useState)(""),[er,eo]=(0,n.useState)(""),ei=()=>{null==J?O(!0):O(!1),null==E?T(!0):T(!1),null!=J&&null!=E&&(z<Number(Q)+Number(Z)||0==z)?g(!0):(et(!0),en("Error de validaci\xf3n"),eo("Debe seleccionar un encargado, un municipio y el abono debe ser menor o igual a la deuda"))},el=async()=>{try{if(!(await fetch("/api/entregas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({en_id:U,emp_id:J,cli_id:E,en_incremento_producto:Number(x),en_incremento_paquete:Number(v),en_dia_pedido:I,en_dia_entrega:null,en_hora_salida:null,en_hora_entrega:null,en_estado:"por confirmar"})})).ok)throw Error("Network response was not ok");if(null!=f&&0!=f.length&&await fetch("/api/entregas/productos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then(e=>{if(!e.ok)throw Error("Error al intentar agregar los productos");return e.json()}),null!=P&&0!=P.length){let e=P.map(e=>({...e,en_pa_desc:v}));console.log(e),await fetch("/api/entregas/paquetes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw Error("Error al intentar agregar los paquetes")})}if(!(await fetch("/api/entregas/deudas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({en_id:U,deu_abono:z,deu_estado:"a procesar",deu_deuda:Number(Q)+Number(Z),deu_deuda_pendiente:Number(Q)+Number(Z)-Number(z),deu_comision_funjal:Number(X),deu_comision_enlace:Number(H)})})).ok)throw Error("Network response was not ok")}catch(e){console.log(e.message)}t.push("/entregas")};return(0,s.jsxs)("div",{children:[s.jsx("div",{className:o().navegacion,children:(0,s.jsxs)("h4",{children:[s.jsx(i.default,{href:"/entregas",className:o().link,children:"Entregas"})," ","\\ Nuevo"]})}),(0,s.jsxs)("div",{className:o().herramientas,children:[(0,s.jsxs)("div",{children:[s.jsx("label",{children:"Incremento para los productos: "}),s.jsx("input",{type:"number",className:o().input,min:0,value:x,onChange:e=>{j(e.target.value),W(!0),ee(!1)}})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{children:"Incremento para los paquetes: "}),s.jsx("input",{type:"number",className:o().input,min:0,value:v,onChange:e=>{b(e.target.value),W(!0),ee(!1)}})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{children:"Abono: "}),s.jsx("input",{type:"number",className:o().input,min:0,value:z,onChange:e=>{M(e.target.value)}})]}),s.jsx("div",{children:(0,s.jsxs)("p",{children:["Deuda:"," ",s.jsx("b",{children:(Number(Q)+Number(Z)-Number(z)).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0})})]})}),s.jsx(d.zx,{text:"Terminado",type:"cancelar",onPress:()=>{ei()}})]}),(0,s.jsxs)("div",{className:o().contenido,children:[(0,s.jsxs)("div",{className:o().subContenedor1,children:[(0,s.jsxs)("div",{className:o().herramientasContenido,children:[s.jsx(d.zx,{text:"Seleccionar Productos",type:Y?"":"cancelar",onPress:()=>{W(!0),ee(!1)}}),s.jsx(d.zx,{text:"Total Lista de Productos",type:$?"":"cancelar",onPress:()=>{W(!1),ee(!0)}})]}),Y&&(0,s.jsxs)("div",{className:o().scrollable,children:[s.jsx(u.a3,{listaProductos:f,modificarLista:e=>{S(e)},idEntrega:U,modificador:x,validar:y}),s.jsx(u.XD,{listaPaquetes:P,modificarLista:e=>{C(e)},idEntrega:U,modificador:v,validar:w})]}),$&&s.jsx("div",{className:o().scrollable,children:s.jsx(c.Z,{productos:f,paquetes:P,totalAPagar:()=>{}})})]}),(0,s.jsxs)("div",{className:o().subContenedor2,children:[s.jsx(u.Bj,{datosCliente:e=>{k(e)},validar:D}),s.jsx(u.Jl,{enlace:e=>{A(e)},validar:F})]})]}),s.jsx(d.u_,{show:r,title:"Agregar Nueva Entrega",message:"Se agregara una nueva entrega con los datos previamente selecci\xf3nados",handleAccept:()=>{h(!0),el()},handleClose:()=>g(!1)}),s.jsx(d.bZ,{show:ea,handleAccept:()=>et(!1),title:es,message:er}),s.jsx(m.Z,{show:_})]})}},26311:e=>{e.exports={navegacion:"page_navegacion__v9Q_S",link:"page_link__KUA3H",contenido:"page_contenido__R4rvm",herramientasContenido:"page_herramientasContenido___ntvc",herramientas:"page_herramientas__wPxYV",subContenedor1:"page_subContenedor1__gexTs",subContenedor2:"page_subContenedor2__EDIIq",input:"page_input__VtQq5",scrollable:"page_scrollable__w7Q0F"}},10530:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\eloym\Documents\Fundacion Jalisco\fj_sistema_gen\src\app\entregas\nuevo\page.jsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[8948,1404,434,4424,5175],()=>t(55146));module.exports=s})();