(()=>{var e={};e.id=3764,e.ids=[3764],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},100:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>t.a,__next_app__:()=>u,originalPathname:()=>_,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(36597),s(23658),s(10468),s(91837);var i=s(23191),r=s(88716),o=s(37922),t=s.n(o),l=s(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(a,n);let d=["",{children:["historial",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,36597)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\historial\\page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,23658)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\layout.jsx"],loading:[()=>Promise.resolve().then(s.bind(s,10468)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(s.bind(s,91837)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\historial\\page.jsx"],_="/historial/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/historial/page",pathname:"/historial",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},70687:(e,a,s)=>{Promise.resolve().then(s.bind(s,97047))},97047:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>C});var i=s(10326),r=s(17577),o=s(63399),t=s.n(o),l=s(90434),n=s(72557),d=s(95753),c=s(35298),_=s.n(c),u=s(81608),h=s(40487),x=s.n(h);let m=function({historial:e}){return(0,i.jsxs)("div",{children:[i.jsx("div",{className:x().header,children:i.jsx("h3",{children:"Historial de entradas y salidad de productos"})}),(0,i.jsxs)("div",{className:x().titulo,children:[i.jsx("h4",{className:x().nombre,children:"Producto"}),i.jsx("h4",{className:x().estado,children:"Estado"}),i.jsx("h4",{className:x().motivo,children:"Motivo"}),i.jsx("h4",{className:x().cantidad,children:"Cant"}),i.jsx("h4",{className:x().fecha,children:"D\xeda"}),i.jsx("h4",{className:x().hora,children:"Hora"})]}),e.map((e,a)=>(0,i.jsxs)("div",{className:x().container,children:[i.jsx("div",{className:x().nombre,children:e.produc_nombre}),i.jsx("div",{className:x().estado,children:"salida"==e.hist_estado?i.jsx(_(),{name:"caret-up-outline",className:x().rojo}):i.jsx(_(),{name:"caret-down-outline",className:x().verde})}),i.jsx("div",{className:x().motivo,children:e.hist_motivo}),i.jsx("div",{className:x().cantidad,children:e.hist_cantidad}),i.jsx("div",{className:x().fecha,children:(0,u.ji)(e.hist_dia)}),i.jsx("div",{className:x().hora,children:e.hist_hora})]},a)),i.jsx("div",{className:x().fooder})]})};var p=s(80257),j=s.n(p),v=s(24872),b=s.n(v);let g=function({proveedores:e}){return(0,i.jsxs)("div",{children:[i.jsx("div",{className:b().header,children:i.jsx("h3",{children:"Proveedores"})}),(0,i.jsxs)("div",{className:b().titulo,children:[i.jsx("h4",{className:b().nombre,children:"Nombre"}),i.jsx("h4",{className:b().telefono,children:"Telefono"}),i.jsx("h4",{className:b().direccion,children:"Direcci\xf3n"}),i.jsx("h4",{className:b().rfc,children:"RFC"})]}),0!=e.length&&i.jsx(i.Fragment,{children:e.map((e,a)=>(0,i.jsxs)("div",{className:b().container,children:[i.jsx("div",{className:b().nombre,children:e.prov_nombre}),i.jsx("div",{className:b().telefono,children:e.prov_numero_cont}),(0,i.jsxs)("div",{className:b().direccion,children:[e.prov_direccion,", ",e.prov_municipio,", ",e.prov_estado]}),i.jsx("div",{className:b().rfc,children:e.prov_rfc})]},a))}),i.jsx("div",{className:b().fooder})]})};var f=s(28428);function N({producto:e}){let[a,s]=(0,r.useState)(!1),[o,t]=(0,r.useState)([]),[l,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(1),_=()=>{fetch(`/api/historial/inventario/${e.produc_id}`).then(e=>{if(!e.ok)throw Error("Error al cargar historial");return e.json()}).then(e=>{console.log(e),t(e.historial),n(e.proveedores)}).catch(e=>{console.log(e)})},h=e=>{c(e)},x=20*d;o.slice(x-20,x);let p=Math.ceil(o.length/20);return i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:`
          ${j().container} 
          ${a?j().desplegado:""}
        `,onClick:()=>{s(!a),a||0!=o.length||_()},children:[i.jsx("div",{className:j().nombre,children:a?i.jsx("h3",{children:e.produc_nombre}):i.jsx("p",{children:e.produc_nombre})}),i.jsx("div",{className:j().cantidad,children:a?i.jsx("h3",{children:e.produc_existencias}):i.jsx("p",{children:e.produc_existencias})}),i.jsx("div",{className:j().precio,children:a?i.jsx("h3",{children:(0,u.uf)(e.produc_precio_venta)}):i.jsx("p",{children:(0,u.uf)(e.produc_precio_venta)})}),i.jsx("div",{className:j().participacion,children:a?i.jsx("h3",{children:(0,u.uf)(e.produc_parti_fun)}):i.jsx("p",{children:(0,u.uf)(e.produc_parti_fun)})}),i.jsx("div",{className:j().participacion,children:a?i.jsx("h3",{children:(0,u.uf)(e.produc_parti_enlace)}):i.jsx("p",{children:(0,u.uf)(e.produc_parti_enlace)})}),a&&(0,i.jsxs)("div",{className:j().contenedorHistorial,children:[i.jsx(m,{historial:o}),[...Array(p).keys()].map(e=>i.jsx("button",{className:`${j().button} ${e+1===d?j().disabled:j().enabled}`,onClick:()=>h(e+1),disabled:e+1===d,children:e+1},e)),i.jsx(g,{proveedores:l})]})]})})}let T=function(){let[e,a]=(0,r.useState)([]),[s,o]=(0,r.useState)(0),[t,l]=(0,r.useState)(0),[d,c]=(0,r.useState)(0),[_,h]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),T=async()=>{let a=new Date,i=e.find(e=>e.produc_id==t),r=i.produc_existencias-_;await fetch(`/api/productos/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({produc_existencias:r})}).then(e=>{if(!e.ok)throw Error("Error al actualizar producto");return e.json()}).catch(e=>{console.log(e)}),await fetch("/api/inventario/historial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({produc_id:t,hist_estado:"salida",hist_cantidad:_,hist_precio_ent_sal:i.produc_precio_venta,hist_motivo:1==s?"venta individual":2==s?"da\xf1ado":"no encontrado",hist_dia:a.toISOString().split("T")[0],hist_hora:(0,u.P4)()})}).then(e=>{if(!e.ok)throw Error("Error al generar historial");return e.json()}).catch(e=>{console.log(e)}),o(0),l(0),h(0),m(!1),v(!1),g(!b)};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:j().herramientas,children:[(0,i.jsxs)("div",{children:[i.jsx("label",{children:"Seleccionar opci\xf3n: "}),(0,i.jsxs)("select",{className:j().select,value:s,onChange:e=>{o(e.target.value),console.log(e.target.value)},children:[i.jsx("option",{value:0,children:"--Seleccionar--"}),i.jsx("option",{value:1,children:"venta individual"}),i.jsx("option",{value:2,children:"da\xf1ado"}),i.jsx("option",{value:3,children:"no encontrado"})]}),i.jsx("label",{children:"Seleccionar producto: "}),(0,i.jsxs)("select",{className:j().select,value:t,onChange:a=>{l(a.target.value),c(e.find(e=>e.produc_id==a.target.value).produc_existencias)},children:[i.jsx("option",{value:0,children:"--Seleccionar--"}),e.map((e,a)=>i.jsx("option",{value:e.produc_id,children:e.produc_nombre},a))]}),i.jsx("input",{className:j().input,type:"number",placeholder:"Cantidad",value:_,onChange:e=>{h(e.target.value)},min:0,max:d,disabled:0==t})]}),i.jsx("div",{children:i.jsx(n.zx,{text:"Aceptar",disabled:0==s||0==t||0==_,type:0==s||0==t||0==_?"":"cancelar",onPress:()=>{m(!0)}})})]}),i.jsx("div",{className:j().header,children:i.jsx("h3",{children:"Historial de productos"})}),(0,i.jsxs)("div",{className:j().titulo,children:[i.jsx("h4",{className:j().nombre,children:"Producto"}),i.jsx("h4",{className:j().cantidad,children:"Cantidad"}),i.jsx("h4",{className:j().precio,children:"Precio"}),i.jsx("h4",{className:j().participacion,children:"Participaci\xf3n Fundaci\xf3n"}),i.jsx("h4",{className:j().participacion,children:"Participaci\xf3n Enlace"})]}),0!=e.length&&i.jsx(i.Fragment,{children:e.map((e,a)=>i.jsx(N,{producto:e},a))}),i.jsx("div",{className:j().fooder}),i.jsx(n.u_,{title:"Ejecutar Acci\xf3n",message:"\xbfQuieres ejecutar la acci\xf3n?, Se retirara la cantida de productos del inventario y no se podra deshacer la acci\xf3n",show:x,handleClose:()=>{m(!1)},handleAccept:()=>{v(!0),T()}}),i.jsx(f.Z,{show:p})]})};var P=s(14238),H=s.n(P);let S=function({entregas:e}){return(0,i.jsxs)("div",{children:[i.jsx("div",{className:H().header,children:i.jsx("h3",{children:"Historial de Entregas"})}),(0,i.jsxs)("div",{className:H().titulo,children:[i.jsx("h4",{className:H().municipio,children:"Municipio"}),i.jsx("h4",{className:H().entregado,children:"Entregado"}),i.jsx("h4",{className:H().estado,children:"Estado"}),i.jsx("h4",{className:H().monto,children:"Monto"}),i.jsx("h4",{className:H().pendiente,children:"Pago pendiente"}),i.jsx("h4",{className:H().comision,children:"Comisi\xf3n In"}),i.jsx("h4",{className:H().comision,children:"Comisi\xf3n Ex"}),i.jsx("h4",{className:H().totalfunjal,children:"Total"})]}),e?i.jsx(i.Fragment,{children:e.map((e,a)=>(0,i.jsxs)("div",{className:H().container,children:[(0,i.jsxs)("div",{className:H().municipio,children:[e.cli_municipio,", ",e.cli_estado]}),i.jsx("div",{className:H().entregado,children:(0,u.ji)(e.en_dia_entrega)}),i.jsx("div",{className:H().estado,children:e.deu_estado}),i.jsx("div",{className:H().monto,children:(0,u.uf)(e.deu_deuda)}),i.jsx("div",{className:H().pendiente,children:(0,u.uf)(e.deu_deuda_pendiente)}),i.jsx("div",{className:H().comision,children:(0,u.uf)(e.deu_comision_funjal)}),i.jsx("div",{className:H().comision,children:(0,u.uf)(e.deu_comision_enlace)}),i.jsx("div",{className:H().totalfunjal,children:(0,u.uf)(e.deu_deuda-e.deu_comision_funjal-e.deu_comision_enlace)})]},a))}):i.jsx("div",{className:H().container,children:"Auno no hay datos"}),i.jsx("div",{className:H().fooder})]})};var y=s(77109),E=s(35047);let C=function(){let{data:e,status:a}=(0,y.useSession)();(0,E.useRouter)();let[s,o]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[h,x]=(0,r.useState)([]),[p,j]=(0,r.useState)(0),[v,b]=(0,r.useState)(15),[g,f]=(0,r.useState)(null),[N,P]=(0,r.useState)(null),[H,C]=(0,r.useState)(null),[w,D]=(0,r.useState)(!0),[O,F]=(0,r.useState)(!1),[q,z]=(0,r.useState)(!1),A=()=>{};return s?i.jsx("div",{className:t().loadingScreen,children:i.jsx(d.Z,{})}):c?i.jsx("div",{className:t().error,children:(0,i.jsxs)("div",{className:t().errorContent,children:[i.jsx(_(),{className:t().textIcon,name:"cloud-offline-outline"}),i.jsx("p",{className:t().textError,children:c.message})]})}):(0,i.jsxs)("div",{children:[i.jsx("div",{className:t().navegacion,children:(0,i.jsxs)("h4",{children:[i.jsx(l.default,{href:"/Historial",className:t().link,children:"Historial"})," ","\\"," "]})}),(0,i.jsxs)("div",{className:t().herramientas,children:[i.jsx(n.zx,{text:"Movimientos de inventario",type:w?"":"cancelar",onPress:()=>{x([]),j(0),P(null),C(null),f(null),D(!0),z(!1),F(!1)}}),i.jsx(n.zx,{text:"Productos",type:O?"":"cancelar",onPress:()=>{D(!1),z(!1),F(!0)}}),i.jsx(n.zx,{text:"Historial de entregas",type:q?"":"cancelar",onPress:()=>{x([]),j(0),P(null),C(null),f(null),D(!1),z(!0),F(!1),A()}})]}),w&&(0,i.jsxs)("div",{className:t().herramientas,children:[i.jsx("label",{children:"filtrar por: "}),i.jsx(n.zx,{text:"Entradas",type:"entrada"==g?"":"cancelar",onPress:()=>{"entrada"==g?(j(0),x([]),f(null)):(j(0),x([]),f("entrada"))}}),i.jsx(n.zx,{text:"Salidas",type:"salida"==g?"":"cancelar",onPress:()=>{"salida"==g?(j(0),x([]),f(null)):(j(0),x([]),f("salida"))}}),i.jsx(n.zx,{text:"Esta semana",type:N?"":"cancelar",onPress:()=>{if(C(null),N)j(0),x([]),P(null);else{let e=new Date;j(0),x([]),P(e.toISOString().split("T")[0])}}}),i.jsx(n.zx,{text:"Este mes",type:H?"":"cancelar",onPress:()=>{if(P(null),H)j(0),x([]),C(null);else{let e=new Date;j(0),x([]),C(e.toISOString().split("T")[0])}}})]}),q&&(0,i.jsxs)("div",{className:t().herramientas,children:[i.jsx("label",{children:"filtrar por: "}),i.jsx(n.zx,{text:"Saldadas",type:"saldada"==g?"":"cancelar",onPress:()=>{"saldada"==g?(j(0),x([]),f(null)):(j(0),x([]),f("saldada"))}}),i.jsx(n.zx,{text:"pendientes",type:"pendiente"==g?"":"cancelar",onPress:()=>{"pendiente"==g?(j(0),x([]),f(null)):(j(0),x([]),f("pendiente"))}})]}),(0,i.jsxs)("div",{className:t().contenido,children:[w&&i.jsx(m,{historial:h}),O&&i.jsx(T,{}),q&&i.jsx(S,{entregas:h})]})]})}},28428:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});var i=s(10326),r=s(73730),o=s.n(r);let t=function({show:e}){return i.jsx("div",{className:`${o().modal} ${e?o().show:""}`,children:(0,i.jsxs)("div",{className:o().contenedor,children:[i.jsx("div",{className:o().cuadrado1}),i.jsx("div",{className:o().cuadrado2})]})})}},63399:e=>{e.exports={navegacion:"page_navegacion__n6vZH",link:"page_link__5ApgB",contenido:"page_contenido__Uc00y",herramientas:"page_herramientas__QP2XF",busqueda:"page_busqueda__kxTOc",filtro:"page_filtro__mGu8D",ajustarfiltro:"page_ajustarfiltro__rj5Il",banner:"page_banner__zxAlf",loadingScreen:"page_loadingScreen__63f1p",error:"page_error__BYpsi",textIcon:"page_textIcon__f39oF",textError:"page_textError__7L1Yt",errorContent:"page_errorContent__93LUH"}},40487:e=>{e.exports={header:"TablaHistorial_header__twSkW",container:"TablaHistorial_container__uU65Q",fooder:"TablaHistorial_fooder__U5sxO",totalPrecio:"TablaHistorial_totalPrecio__ES8Ph",totalTexto:"TablaHistorial_totalTexto__NiLwV",totalCantidad:"TablaHistorial_totalCantidad__r5OYt",titulo:"TablaHistorial_titulo__8Q03l",texto:"TablaHistorial_texto__T6O0M",nombre:"TablaHistorial_nombre__Nag_L",cantidad:"TablaHistorial_cantidad___FUQe",precio:"TablaHistorial_precio__rPm65",estado:"TablaHistorial_estado__9dobj",motivo:"TablaHistorial_motivo___0bmr",hora:"TablaHistorial_hora__6wur0",fecha:"TablaHistorial_fecha__pQbdf",circulo:"TablaHistorial_circulo__fbBSB",verde:"TablaHistorial_verde__sU9g4",amarillo:"TablaHistorial_amarillo__Je3PX",rojo:"TablaHistorial_rojo__3Y56s"}},14238:e=>{e.exports={header:"TablaHistorialEntregas_header__uYtwQ",container:"TablaHistorialEntregas_container__ll8gz",fooder:"TablaHistorialEntregas_fooder__x3106",titulo:"TablaHistorialEntregas_titulo__NJDPJ",texto:"TablaHistorialEntregas_texto__9NBW7",municipio:"TablaHistorialEntregas_municipio__ssJ__",pendiente:"TablaHistorialEntregas_pendiente__RuXvk",estado:"TablaHistorialEntregas_estado__EXo_f",monto:"TablaHistorialEntregas_monto__lPZto",entregado:"TablaHistorialEntregas_entregado__fcChF",comision:"TablaHistorialEntregas_comision__NROxY",totalfunjal:"TablaHistorialEntregas_totalfunjal__lcrnW",circulo:"TablaHistorialEntregas_circulo__x_41r",verde:"TablaHistorialEntregas_verde___zNOq",amarillo:"TablaHistorialEntregas_amarillo__eASsP",rojo:"TablaHistorialEntregas_rojo__RqTkV"}},80257:e=>{e.exports={herramientas:"TablaHistorialProductos_herramientas__ORH2e",input:"TablaHistorialProductos_input__xKbxg",select:"TablaHistorialProductos_select__tKRF2",validar:"TablaHistorialProductos_validar__OgCyK",validarTexto:"TablaHistorialProductos_validarTexto__8Qzl3",header:"TablaHistorialProductos_header__oGRm2",container:"TablaHistorialProductos_container__3NCnB",desplegado:"TablaHistorialProductos_desplegado__QxvCN",contenedorHistorial:"TablaHistorialProductos_contenedorHistorial__H2nTt",fooder:"TablaHistorialProductos_fooder__nbpOt",button:"TablaHistorialProductos_button__OT50a",disabled:"TablaHistorialProductos_disabled__fcA45",enabled:"TablaHistorialProductos_enabled__18nwa",totalPrecio:"TablaHistorialProductos_totalPrecio__A3w2s",totalTexto:"TablaHistorialProductos_totalTexto__5jhTH",totalCantidad:"TablaHistorialProductos_totalCantidad__G2TLB",titulo:"TablaHistorialProductos_titulo__r3BBL",texto:"TablaHistorialProductos_texto__HM14w",nombre:"TablaHistorialProductos_nombre__mZlyA",cantidad:"TablaHistorialProductos_cantidad__Sxm_a",estado:"TablaHistorialProductos_estado__ACGrx",precio:"TablaHistorialProductos_precio__oROFt",participacion:"TablaHistorialProductos_participacion__ziWKN",verde:"TablaHistorialProductos_verde__JDL4x",rojo:"TablaHistorialProductos_rojo__6ghjL"}},24872:e=>{e.exports={header:"TablaProveedores_header__jZtvu",container:"TablaProveedores_container__dVzTf",desplegado:"TablaProveedores_desplegado__cy0xJ",fooder:"TablaProveedores_fooder___4lBq",titulo:"TablaProveedores_titulo__RAl71",texto:"TablaProveedores_texto__c0viP",nombre:"TablaProveedores_nombre__HS_Vs",telefono:"TablaProveedores_telefono__igSaV",direccion:"TablaProveedores_direccion___Z8ef",rfc:"TablaProveedores_rfc__o_7gh"}},73730:e=>{e.exports={cuadrado1:"LoadingData_cuadrado1__x1QGj",cuadrado2:"LoadingData_cuadrado2__hOwqp",moverCuadrado1:"LoadingData_moverCuadrado1__vWwXS",moverCuadrado2:"LoadingData_moverCuadrado2__gm3Qs",modal:"LoadingData_modal__Rqj2p",show:"LoadingData_show__jLq8l"}},36597:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});let i=(0,s(68570).createProxy)(String.raw`C:\Users\eloym\Documents\Fundacion Jalisco\fj_sistema_gen\src\app\historial\page.jsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),i=a.X(0,[8948,1404,434,4424],()=>s(100));module.exports=i})();