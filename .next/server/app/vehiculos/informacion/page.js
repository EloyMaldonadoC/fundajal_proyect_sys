(()=>{var e={};e.id=7097,e.ids=[7097],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},12516:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>o.a,__next_app__:()=>_,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>l}),s(70376),s(23658),s(10468),s(91837);var i=s(23191),t=s(88716),n=s(37922),o=s.n(n),r=s(95231),c={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>r[e]);s.d(a,c);let l=["",{children:["vehiculos",{children:["informacion",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,70376)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\vehiculos\\informacion\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,23658)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\layout.jsx"],loading:[()=>Promise.resolve().then(s.bind(s,10468)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(s.bind(s,91837)),"C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\eloym\\Documents\\Fundacion Jalisco\\fj_sistema_gen\\src\\app\\vehiculos\\informacion\\page.jsx"],p="/vehiculos/informacion/page",_={require:s,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/vehiculos/informacion/page",pathname:"/vehiculos/informacion",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},31784:(e,a,s)=>{Promise.resolve().then(s.bind(s,74461))},74461:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>j});var i=s(10326),t=s(17577),n=s(95342),o=s.n(n),r=s(35047),c=s(90434),l=s(80256),d=s(72557),p=s(11990),_=s(28294),u=s.n(_);let h=function({id:e}){let[a,s]=(0,t.useState)(null),[n,o]=(0,t.useState)(""),[r,c]=(0,t.useState)(!1),[p,_]=(0,t.useState)(!1),[h,x]=(0,t.useState)("Todos"),[v,m]=(0,t.useState)(!1),[g,j]=(0,t.useState)(null),[f,S]=(0,t.useState)("pendiente"),[N,b]=(0,t.useState)(""),[y,C]=(0,t.useState)(""),[P,k]=(0,t.useState)(""),[E,w]=(0,t.useState)(""),[z,T]=(0,t.useState)(""),[I,$]=(0,t.useState)(""),[D,O]=(0,t.useState)(!1),[F,A]=(0,t.useState)(!1),[M,V]=(0,t.useState)(!1),J=()=>{console.log("Todos"),fetch(`/api/vehiculos/servicios/${e}`).then(e=>{if(e.ok)return e.json()}).then(e=>{j(e),console.log(e)}).catch(e=>{o(e),s(!1)}),x("Todos"),m(!1)},U=async()=>{try{let[a,i]=await Promise.all([fetch("/api/datetime/date"),fetch("/api/datetime/time")]);if(!a.ok||!i.ok)throw Error("Network response was not ok");let t=await a.json(),n=await i.json();k(t.fecha_actual),w(n.hora_actual),console.log(t.fecha_actual),console.log(n.hora_actual),await fetch("/api/vehiculos/servicios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ve_id:e,ser_estado:f,ser_desc:N,ser_costo:y,ser_fecha_creacion:t.fecha_actual,ser_hora_creacion:n.hora_actual,ser_fecha_realizacion:"",ser_hora_realizacion:""})}).then(e=>{if(!e.ok)throw Error("Network response was not ok");return _(!1),c(!0),b(""),C(""),J(),e.json()}).catch(e=>{o(e),s(!1)})}catch(e){o(e),s(!1)}},q=async e=>{try{let[a,i]=await Promise.all([fetch("/api/datetime/date"),fetch("/api/datetime/time")]);if(!a.ok||!i.ok)throw Error("Network response was not ok");let t=await a.json(),n=await i.json();T(t.fecha_actual),$(n.hora_actual),console.log(t.fecha_actual),console.log(n.hora_actual),await fetch(`/api/vehiculos/servicios/servicio/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ser_estado:"realizado",ser_fecha_realizacion:t.fecha_actual,ser_hora_realizacion:n.hora_actual})}).then(e=>{if(!e.ok)throw Error("network response was not ok");return c(!0),e.json()}).catch(e=>{o(e),s(!1)})}catch(e){o(e),s(!1)}},G=e=>{let a=new Date(e);a.setHours(a.getHours()+a.getTimezoneOffset()/60),console.log(a);let s=String(a.getDate()).padStart(2,"0"),i=String(a.getMonth()+1).padStart(2,"0"),t=a.getFullYear();return`${t}-${i}-${s}`};return a?i.jsx(l.Z,{}):n?(0,i.jsxs)("p",{children:["Error: ",n.message]}):(0,i.jsxs)("div",{children:[i.jsx("div",{className:u().banner,children:i.jsx("h3",{children:"Servicios"})}),(0,i.jsxs)("div",{className:u().serviciosMenu,children:[i.jsx(d.zx,{text:"Todos",type:"Todos"==h?"cancelar":"",onPress:J}),i.jsx(d.zx,{text:"Pendientes",type:"Pendientes"==h?"cancelar":"",onPress:()=>{console.log("Pendientes"),fetch(`/api/vehiculos/servicios/filtro/pendientes/${e}`).then(e=>{if(e.ok)return e.json()}).then(e=>{j(e),console.log(e)}).catch(e=>{o(e),s(!1)}),x("Pendientes"),m(!1)}}),i.jsx(d.zx,{text:"Realizados",type:"Realizados"==h?"cancelar":"",onPress:()=>{console.log("Realizados"),fetch(`/api/vehiculos/servicios/filtro/realizados/${e}`).then(e=>{if(e.ok)return e.json()}).then(e=>{j(e),console.log(e)}).catch(e=>{o(e),s(!1)}),x("Realizados"),m(!1)}}),i.jsx(d.zx,{text:"Nuevo",type:"Nuevo"==h?"cancelar":"",onPress:()=>{x("Nuevo"),m(!v)}})]}),v?(0,i.jsxs)("div",{className:u().servicios,children:[(0,i.jsxs)("div",{children:[i.jsx(d.II,{placeholder:"Descripcion",type:"text",value:N,onChange:e=>{b(e)},validation:F}),i.jsx(d.II,{placeholder:"Costo",type:"number",value:y,onChange:e=>{C(e)},validation:M})]}),i.jsx(d.zx,{text:"Aceptar",type:"aceptar",onPress:()=>{""==N&&A(!0),y<=0||""==y?V(!0):(A(!1),V(!1),_(!0))}})]}):i.jsx(i.Fragment,{children:g?i.jsx("div",{children:g.map(e=>(0,i.jsxs)("div",{className:u().servicios,children:[(0,i.jsxs)("h3",{children:["Servicio ",e.ser_estado]}),(0,i.jsxs)("p",{children:[i.jsx("span",{className:u().text,children:" Descipci\xf3n: "}),e.ser_desc]}),(0,i.jsxs)("p",{children:[i.jsx("span",{className:u().text,children:" Costo: "}),"$",e.ser_costo]}),"realizado"==e.ser_estado&&(0,i.jsxs)("p",{children:[i.jsx("span",{className:u().text,children:" Realizado el "}),G(e.ser_fecha_realizacion),i.jsx("span",{className:u().text,children:" a las "}),e.ser_hora_realizacion]}),"pendiente"==e.ser_estado&&i.jsx("div",{className:u().espaciado,children:i.jsx(d.zx,{text:"Marcar como Realizado",type:"aceptar",onPress:()=>{q(e.ser_id)}})})]},e.ser_id))}):i.jsx("div",{className:u().servicios,children:i.jsx("p",{className:u().sinServicio,children:"A\xfan no hay servicios"})})}),i.jsx(d.u_,{title:"Nuevo Servicio",message:"\xbfAgregar nuevo servicio?",show:p,handleClose:()=>{_(!p)},handleAccept:U})]})};var x=s(77109),v=s(35298),m=s.n(v);function g({data:e,onSelect:a,validar:s,text:n,value:r}){let[c,l]=(0,t.useState)("Optimo");return(0,i.jsxs)("div",{className:o().containerVe,children:[i.jsx("p",{children:n}),i.jsx("select",{value:c,className:`${o().selectVe} ${s?o().validarVe:""}`,onChange:e=>a(e.target.value),style:{borderColor:s?"red":""},children:e.map(e=>i.jsx("option",{value:e.nombre,children:e.nombre},e.id))})]})}let j=function(){let{data:e,status:a}=(0,x.useSession)(),s=(0,r.useSearchParams)().get("id");(0,r.useRouter)();let[n,_]=(0,t.useState)(!1),[u,v]=(0,t.useState)(!1),[j,f]=(0,t.useState)(!1),[S,N]=(0,t.useState)(!0),[b,y]=(0,t.useState)(""),[C,P]=(0,t.useState)(""),[k,E]=(0,t.useState)(!1),[w,z]=(0,t.useState)(""),[T,I]=(0,t.useState)(!1),[$,D]=(0,t.useState)(""),[O,F]=(0,t.useState)(!1),[A,M]=(0,t.useState)(""),[V,J]=(0,t.useState)(""),[U,q]=(0,t.useState)(""),[G,R]=(0,t.useState)(!1),[Y,Z]=(0,t.useState)(""),[H,Q]=(0,t.useState)(!1),[W,X]=(0,t.useState)(""),[B,L]=(0,t.useState)(!1),[K,ee]=(0,t.useState)(""),[ea,es]=(0,t.useState)(!1),[ei,et]=(0,t.useState)(""),[en,eo]=(0,t.useState)(!1),[er,ec]=(0,t.useState)(""),[el,ed]=(0,t.useState)(!1),[ep,e_]=(0,t.useState)(null),[eu,eh]=(0,t.useState)(null);return S?i.jsx("div",{className:o().loadingScreen,children:i.jsx(l.Z,{})}):b?i.jsx("div",{className:o().error,children:(0,i.jsxs)("div",{className:o().errorContent,children:[i.jsx(m(),{className:o().textIcon,name:"cloud-offline-outline"}),i.jsx("p",{className:o().textError,children:"No hay Conexi\xf3n"})]})}):(0,i.jsxs)("div",{children:[i.jsx("div",{className:o().navegacion,children:(0,i.jsxs)("h4",{children:[i.jsx(c.default,{href:"/vehiculos",className:o().link,children:"Vehiculos"})," ","\\ Informaci\xf3n"]})}),eu?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsxs)("div",{className:o().subConteiner1,children:[(0,i.jsxs)("div",{className:o().vehiculo,children:[i.jsx("img",{className:o().imagen,src:eu.ve_imagen,alt:"imagen del vehiculo"}),(0,i.jsxs)("h3",{className:o().titulo,children:[eu.ve_marca," ",eu.ve_modelo," ",eu.ve_ano]})]}),i.jsx("div",{className:o().banner,children:i.jsx("h3",{children:"Observaciones"})}),(0,i.jsxs)("div",{className:o().observaciones,children:[u?(0,i.jsxs)("div",{className:o().observacionesContenido,children:[i.jsx(d.II,{placeholder:"Editar Observaciones",value:C,onChange:e=>{P(e)},type:"text",validation:k}),i.jsx(d.zx,{text:"Aceptar",type:"aceptar",onPress:()=>{if(""==C){E(!0);return}E(!1),fetch(`/api/vehiculos/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ve_observaciones:C})}),v(!1),console.log(C)}})]}):i.jsx("div",{className:o().observacionesContenido,children:i.jsx("p",{children:C})}),i.jsx(d.zx,{text:`${u?"Cancelar":"Editar"}`,type:"aceptar",onPress:()=>{v(!u)}})]}),i.jsx("div",{className:o().banner,children:i.jsx("h3",{children:"Seguro"})}),(0,i.jsxs)("div",{className:o().seguro,children:[i.jsx("div",{className:o().seguroContenido,children:j?(0,i.jsxs)("div",{children:[i.jsx(d.II,{type:"text",placeholder:"Nombre",value:w,onChange:e=>{z(e)},validation:T}),i.jsx(d.II,{type:"number",placeholder:"Monto",value:$,onChange:e=>{D(e)},validation:O}),i.jsx(p.F,{text:"Vigencia: ",value:A,onChange:e=>{M(e)},validation:V}),i.jsx(d.zx,{text:"Aceptar",type:"aceptar",onPress:()=>{if(""==w&&I(!0),$<=0&&F(!0),""==A)J(!0);else if(""!=w&&""!=$){I(!1),F(!1),J(!1);let e={ve_id:s,segu_nombre:w,segu_monto_pago:$,segu_vigencia:A};ep?(console.log("?"),fetch(`/api/vehiculos/seguro/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>{console.log(e.message)})):(console.log("no existe seguro"),fetch("/api/vehiculos/seguro",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).catch(e=>{console.log(e.message)})),window.location.reload()}}})]}):i.jsx("div",{children:ep?(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:[i.jsx("span",{className:o().text,children:" Nombre: "}),ep.segu_nombre]}),(0,i.jsxs)("p",{children:[i.jsx("span",{className:o().text,children:" Monto: "}),"$",ep.segu_monto_pago]}),(0,i.jsxs)("p",{children:[i.jsx("span",{className:o().text,children:" Vigencia: "}),(e=>{let a=new Date(e);a.setHours(a.getHours()+a.getTimezoneOffset()/60);let s=String(a.getDate()).padStart(2,"0"),i=String(a.getMonth()+1).padStart(2,"0"),t=a.getFullYear();return`${t}-${i}-${s}`})(ep.segu_vigencia)]})]}):i.jsx("div",{className:o().sinSeguro,children:i.jsx("p",{children:"No hay seguro"})})})}),i.jsx(d.zx,{text:j?"Cancelar":"Editar",type:"aceptar",onPress:()=>{f(!j)}})]})]}),(0,i.jsxs)("div",{className:o().subConteiner2,children:[i.jsx("div",{className:o().banner,children:i.jsx("h3",{children:"Informaci\xf3n"})}),(0,i.jsxs)("div",{className:o().informacion,children:[(0,i.jsxs)("h3",{className:o().titulo,children:[eu.ve_marca," ",eu.ve_modelo," ",eu.ve_ano]}),(0,i.jsxs)("div",{className:o().infoContainer,children:[(0,i.jsxs)("div",{className:o().infoTexto,children:[(0,i.jsxs)("p",{className:o().separacion,children:[i.jsx("span",{className:o().text,children:"Agencia:"})," ",U]}),(0,i.jsxs)("p",{className:o().separacion,children:[i.jsx("span",{className:o().text,children:"Capacidad: "}),Y," Kg"]}),(0,i.jsxs)("p",{className:o().separacion,children:[i.jsx("span",{className:o().text,children:"Propietario: "}),W]}),(0,i.jsxs)("p",{className:o().separacion,children:[i.jsx("span",{className:o().text,children:"Entidad: "}),K]}),(0,i.jsxs)("p",{className:o().separacion,children:[i.jsx("span",{className:o().text,children:"Placa: "}),ei]}),(0,i.jsxs)("p",{className:o().separacion,children:[i.jsx("span",{className:o().text,children:"Estado: "}),er]})]}),i.jsx("div",{className:o().infoEdicion,children:n&&(0,i.jsxs)("div",{children:[i.jsx(d.II,{placeholder:"Agencia",type:"text",value:U,onChange:e=>{q(e)},validation:G}),i.jsx(d.II,{placeholder:"Capacidad",type:"text",value:Y,onChange:e=>{Z(e)},validation:H}),i.jsx(d.II,{placeholder:"Propietarios",type:"text",value:W,onChange:e=>{X(e)},validation:B}),i.jsx(d.II,{placeholder:"Entidad",type:"text",value:K,onChange:e=>{ee(e)},validation:ea}),i.jsx(d.II,{placeholder:"Placa",type:"text",value:ei,onChange:e=>{et(e)},validation:en}),i.jsx(g,{data:[{id:1,nombre:"Optimo"},{id:2,nombre:"Revisi\xf3n"},{id:3,nombre:"Fuera de Servicio"}],onSelect:e=>ec(e),validar:el,text:"Estado: ",value:er})]})}),i.jsx("div",{className:`${o().infoBotones} ${n?o().enEdicion:o().noEdicion}`,children:n?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:o().empySpace}),(0,i.jsxs)("div",{className:o().botonesEdicion,children:[i.jsx(d.zx,{text:"Cancelar",type:"aceptar",onPress:()=>{_(!n)}}),i.jsx(d.zx,{text:"Guardar Cambios",type:"aceptar",onPress:()=>{""==U&&R(!0),(Y<=0||""==Y)&&Q(!0),""==W&&L(!0),""==K&&es(!0),""==ei?eo(!0):(fetch(`/api/vehiculos/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ve_agencia:U,ve_capacidad:Y,ve_entidad:K,ve_propietario:W,ve_placas:ei,ve_estatus_gen:er})}),_(!n))}})]})]}):i.jsx(d.zx,{text:"Editar",type:"aceptar",onPress:()=>{_(!n)}})})]})]}),i.jsx(h,{id:s})]})]}):i.jsx("div",{className:o().carga,children:i.jsx(l.Z,{})})]})}},11990:(e,a,s)=>{"use strict";s.d(a,{F:()=>l,a:()=>o});var i=s(10326);s(17577);var t=s(4773),n=s.n(t);let o=function({text:e,timeSelect:a,time:s,validation:t}){return(0,i.jsxs)("div",{className:n()["time-picker-container"],children:[i.jsx("label",{htmlFor:"time",className:`${n()["time-picker-label"]} ${t?n().validation:""}`,children:e}),i.jsx("input",{id:"time",type:"time",value:s,onChange:e=>{a(e.target.value)},className:`${n()["time-picker-input"]} ${t?n().validation:""}`,step:"300"})]})};var r=s(71551),c=s.n(r);let l=function({text:e,value:a,onChange:s,validation:t}){return(0,i.jsxs)("div",{className:`${c().container} ${t?c().validation:""}`,children:[i.jsx("label",{children:e}),i.jsx("input",{className:`${c().date} ${t?c().validation:""}`,type:"date",value:a,onChange:e=>{s(e.target.value)}})]})}},95342:e=>{e.exports={navegacion:"page_navegacion__x3zEG",link:"page_link__NYfTY",container:"page_container__iIzu0",vehiculo:"page_vehiculo__w1PS3",informacion:"page_informacion__TEYO2",seguro:"page_seguro__c1YEk",seguroContenido:"page_seguroContenido__wtYmj",sinSeguro:"page_sinSeguro__4_DIP",observaciones:"page_observaciones__rov2h",observacionesContenido:"page_observacionesContenido__H10AX",serviciosMenu:"page_serviciosMenu__7BOZC",servicios:"page_servicios__82rNW",subConteiner1:"page_subConteiner1__m6a00",subConteiner2:"page_subConteiner2__x_TAj",imagen:"page_imagen__LasFD",titulo:"page_titulo__P42JE",infoContainer:"page_infoContainer__lfos1",infoTexto:"page_infoTexto__GbzfE",infoEdicion:"page_infoEdicion__gfZdE",noEdicion:"page_noEdicion__kigjk",enEdicion:"page_enEdicion__Qk5LP",infoBotones:"page_infoBotones__WNz5b",separacion:"page_separacion__YHMpd",text:"page_text__Vw6Uq",carga:"page_carga___ELP6",botonesSpace:"page_botonesSpace__27Q40",empySpace:"page_empySpace__JNrcg",botonesEdicion:"page_botonesEdicion__UD_qY",sinServicio:"page_sinServicio__swynj",banner:"page_banner__FsipR",edicionSerguro:"page_edicionSerguro__Z9ZlP",containerVe:"page_containerVe__HztkO",selectVe:"page_selectVe__Hm77D",validarVe:"page_validarVe___tDXe",validarTextoVe:"page_validarTextoVe__4m_dq",loadingScreen:"page_loadingScreen__1RUMC",error:"page_error__dkaSQ",textIcon:"page_textIcon__WcONq",textError:"page_textError__6AZiX",errorContent:"page_errorContent__g5QaE"}},71551:e=>{e.exports={container:"DatePick_container__Iz8Yd",date:"DatePick_date__H2cuu",validation:"DatePick_validation__xtQCJ"}},4773:e=>{e.exports={"time-picker-container":"TimePick_time-picker-container__ypGNX","time-picker-label":"TimePick_time-picker-label__UzI3b","time-picker-input":"TimePick_time-picker-input__AxGwA",validation:"TimePick_validation__FDMTC"}},28294:e=>{e.exports={banner:"Servicios_banner__ZNWSD",serviciosMenu:"Servicios_serviciosMenu__bh7bN",servicios:"Servicios_servicios__pVbiC",sinServicio:"Servicios_sinServicio__hwFoZ",espaciado:"Servicios_espaciado__OWzmi"}},70376:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});let i=(0,s(68570).createProxy)(String.raw`C:\Users\eloym\Documents\Fundacion Jalisco\fj_sistema_gen\src\app\vehiculos\informacion\page.jsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),i=a.X(0,[8948,1404,434,4424],()=>s(12516));module.exports=i})();